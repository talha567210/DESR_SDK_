<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enhanced AR Viewer - Auto-load with GLB Support</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/DRACOLoader.js"></script>
<link rel="stylesheet" href="styles/style.css">
</head>

<body>
<video id="video" autoplay muted playsinline></video>
<canvas id="ar-canvas"></canvas>

<!-- Table Number Display with View Orders Button -->
<div class="table-number-display" id="tableNumberDisplay">
<span class="table-number-text" id="tableNumberText">Table 1</span>
<button class="view-orders-btn" id="viewOrdersBtn">Your Order</button>
</div>

<!-- Initial Selection Screen -->
<div class="initial-selection-overlay" id="initialSelectionOverlay">
<div class="selection-container">
<!-- Language Selection Box -->
<div class="selection-box" id="languageBox">
<span id="languageText">Select Language</span>
<!-- Language Dropdown -->
<div class="language-dropdown" id="languageDropdown">
<button class="language-option" data-lang="en">
<span class="language-flag">ğŸ‡ºğŸ‡¸</span>
<span>English</span>
</button>
<button class="language-option" data-lang="ja">
<span class="language-flag">ğŸ‡¯ğŸ‡µ</span>
<span>æ—¥æœ¬èª</span>
</button>
<button class="language-option" data-lang="id">
<span class="language-flag">ğŸ‡®ğŸ‡©</span>
<span>Bahasa Indonesia</span>
</button>
<button class="language-option" data-lang="tr">
<span class="language-flag">ğŸ‡¹ğŸ‡·</span>
<span>TÃ¼rkÃ§e</span>
</button>
<button class="language-option" data-lang="bn">
<span class="language-flag">ğŸ‡§ğŸ‡©</span>
<span>à¦¬à¦¾à¦‚à¦²à¦¾</span>
</button>
<button class="language-option" data-lang="ar">
<span class="language-flag">ğŸ‡¦ğŸ‡ª</span>
<span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
</button>
</div>
</div>

<!-- Table Selection Box -->
<div class="selection-box" id="tableBox">
<span id="tableText">Select Table</span>
<!-- Table Dropdown -->
<div class="table-dropdown" id="tableDropdown">
<div class="table-options" id="tableOptions">
<!-- Table options will be generated dynamically -->
</div>
</div>
</div>

<!-- Continue Button -->
<button class="continue-btn" id="continueBtn" disabled>Continue</button>
</div>
</div>

<!-- Model Info Display Elements -->
<div class="model-name-display" id="modelNameDisplay">
<h1 class="model-name-text" id="modelNameText">Loading...</h1>
</div>

<div class="model-description-display" id="modelDescriptionDisplay">
<p class="model-description-text" id="modelDescriptionText"></p>
<p class="model-price-text" id="modelPriceText"></p>
<button class="order-button" id="orderButton">Order</button>
</div>

<div class="menu-trigger" id="menuTrigger">
<span class="menu-text">MENU â˜°</span>
</div>

<div class="menu-panel" id="menuPanel">
<div class="menu-header">Menu List ğŸœï¸</div>
<div class="menu-category">
<div class="category-title">Demo Models</div>
<div class="menu-item glb-model" data-model-key="meal">
<div class="item-name">Miso Ramen</div>
<div class="item-description">Traditional Japanese miso ramen with rich broth...</div>
<div class="item-price">Â¥3,000</div>
<div class="item-status">DRACO</div>
<div class="config-indicator">CUSTOM</div>
<button class="menu-order-btn" data-model-key="meal">Order</button>
</div>
<div class="menu-item glb-model" data-model-key="meal2">
<div class="item-name">Spicy Ramen</div>
<div class="item-description">Hot and spicy ramen with extra kick...</div>
<div class="item-price">Â¥1,200</div>
<div class="item-status">DRACO</div>
<div class="config-indicator">CUSTOM</div>
<button class="menu-order-btn" data-model-key="meal2">Order</button>
</div>
<div class="menu-item glb-model" data-model-key="meal3">
<div class="item-name">Seafood Ramen</div>
<div class="item-description">Fresh seafood with prawns, crab, and vegetables...</div>
<div class="item-price">Â¥950</div>
<div class="item-status">DRACO</div>
<div class="config-indicator">CUSTOM</div>
<button class="menu-order-btn" data-model-key="meal3">Order</button>
</div>
<div class="menu-item glb-model" data-model-key="meal4">
<div class="item-name">Chicken Teriyaki Bowl</div>
<div class="item-description">Grilled chicken teriyaki with steamed rice...</div>
<div class="item-price">Â¥1,100</div>
<div class="item-status">DRACO</div>
<div class="config-indicator">CUSTOM</div>
<button class="menu-order-btn" data-model-key="meal4">Order</button>
</div>
<div class="menu-item glb-model" data-model-key="meal5">
<div class="item-name">Vegetarian Curry</div>
<div class="item-description">Aromatic curry with seasonal vegetables and tofu...</div>
<div class="item-price">Â¥1,300</div>
<div class="item-status">DRACO</div>
<div class="config-indicator">CUSTOM</div>
<button class="menu-order-btn" data-model-key="meal5">Order</button>
</div>
<div class="menu-item glb-model" data-model-key="meal6">
<div class="item-name">Beef Udon</div>
<div class="item-description">Thick udon noodles with tender beef slices...</div>
<div class="item-price">Â¥1,400</div>
<div class="item-status">DRACO</div>
<div class="config-indicator">CUSTOM</div>
<button class="menu-order-btn" data-model-key="meal6">Order</button>
</div>
</div>
</div>

<!-- Order Summary Overlay -->
<div class="order-summary-overlay" id="orderSummaryOverlay">
<div class="order-summary-content">
<div class="order-summary-header">
<h2 class="order-summary-title" id="orderSummaryTitle">Table 1 Orders</h2>
<button class="close-orders-btn" id="closeOrdersBtn">Ã—</button>
</div>
<div class="order-list" id="orderList">
<div class="no-orders-message">No orders yet</div>
</div>
<div class="order-summary-footer">
<div class="total-amount" id="totalAmount">Total: Â¥0</div>
<button class="clear-orders-btn" id="clearOrdersBtn">Clear All</button>
</div>
</div>
</div>

<div class="loading-overlay" id="loadingOverlay">
<div class="loading-content">
<div class="loading-spinner"></div>
<div class="loading-text" id="loadingText">Loading Meals...</div>
<div class="loading-progress" id="loadingProgress">Initializing...</div>
</div>
</div>

<div class="error-message" id="errorMessage"></div>

<!-- Navigation arrows -->
<div id="prevModel" class="nav-arrow">&#8249;</div>
<div id="nextModel" class="nav-arrow">&#8250;</div>

<script>
// Language Translation System
const translations = {
en: {
// Table input
welcomeTitle: "Welcome to our restaurant!",
tableInputDescription: "Please enter your table number to begin your AR dining experience",
tableNumberPlaceholder: "Table Number",
confirmTableButton: "Place your Table Number",
tableRangeInfo: "Tables 1-17 available",
backgroundLoadingText: "Preparing your Menu...",

// Language selection
languageSelectionTitle: "Choose Your Language / è¨€èªã‚’é¸æŠ",
continueButton: "Continue",

// Table display
tableText: "Table",
yourOrderButton: "See Your Order",

// Menu
menuTrigger: "MENU â˜°",
menuHeader: "Menu List ğŸœï¸",
categoryTitle: "Demo Models",
orderButton: "Order",

// Model descriptions
misoRamenName: "Miso Ramen",
misoRamenDescription: "Traditional Japanese miso ramen with rich, savory broth, tender noodles, and fresh vegetables. A comfort food favorite that warms the soul.",
spicyRamenName: "Spicy Ramen",
spicyRamenDescription: "Fiery hot ramen with extra spice blend, perfect for those who love intense flavors. Topped with chili oil and fresh scallions.",
meal3Name: "Seafood Ramen",
meal3Description: "Fresh seafood ramen with prawns, crab, and tender vegetables in a rich ocean-flavored broth. A delightful maritime experience.",
meal4Name: "Chicken Teriyaki Bowl",
meal4Description: "Grilled chicken teriyaki served over steamed rice with crisp vegetables and our signature teriyaki sauce. A balanced and satisfying meal.",
meal5Name: "Vegetarian Curry",
meal5Description: "Aromatic vegetarian curry with seasonal vegetables, tofu, and fragrant spices served with jasmine rice. A healthy and flavorful choice.",
meal6Name: "Beef Udon",
meal6Description: "Thick udon noodles with tender beef slices in a savory soy-based broth, topped with scallions and mushrooms. A hearty comfort meal.",

// Order summary
orderSummaryTitle: "Orders",
noOrdersMessage: "No orders yet",
totalText: "Total",
clearAllButton: "Clear All",
removeItem: "Remove item",
itemRemoved: "Item removed",

// Loading and messages
loadingText: "Loading Meals...",
loadingProgress: "Initializing...",
errorMessage: "Please enter a valid table number (1-17)",
orderAdded: "Order added",
addedToOrder: "Added to order"
},

ja: {
// Table input
welcomeTitle: "å½“ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã¸ã‚ˆã†ã“ãï¼",
tableInputDescription: "ARãƒ€ã‚¤ãƒ‹ãƒ³ã‚°ä½“é¨“ã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
tableNumberPlaceholder: "ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·",
confirmTableButton: "ãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·ã‚’è¨­å®š",
tableRangeInfo: "ãƒ†ãƒ¼ãƒ–ãƒ«1-17ãŒåˆ©ç”¨å¯èƒ½",
backgroundLoadingText: "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æº–å‚™ä¸­...",

// Language selection
languageSelectionTitle: "è¨€èªã‚’é¸æŠã—ã¦ãã ã•ã„ / Choose Your Language",
continueButton: "ç¶šè¡Œ",

// Table display
tableText: "ãƒ†ãƒ¼ãƒ–ãƒ«",
yourOrderButton: "ã”æ³¨æ–‡",

// Menu
menuTrigger: "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â˜°",
menuHeader: "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªã‚¹ãƒˆ ğŸœï¸",
categoryTitle: "ãƒ‡ãƒ¢ãƒ¢ãƒ‡ãƒ«",
orderButton: "æ³¨æ–‡",

// Model descriptions
misoRamenName: "å‘³å™Œãƒ©ãƒ¼ãƒ¡ãƒ³",
misoRamenDescription: "æ¿ƒåšã§é¢¨å‘³è±Šã‹ãªã‚¹ãƒ¼ãƒ—ã€æŸ”ã‚‰ã‹ã„éººã€æ–°é®®ãªé‡èœãŒå…¥ã£ãŸä¼çµ±çš„ãªæ—¥æœ¬ã®å‘³å™Œãƒ©ãƒ¼ãƒ¡ãƒ³ã€‚å¿ƒã‚’æ¸©ã‚ã‚‹å®šç•ªã®ä¸€å“ã§ã™ã€‚",
spicyRamenName: "è¾›å£ãƒ©ãƒ¼ãƒ¡ãƒ³",
spicyRamenDescription: "ç‰¹è£½ã‚¹ãƒ‘ã‚¤ã‚¹ãƒ–ãƒ¬ãƒ³ãƒ‰ã§æ¿€è¾›ã«ä»•ä¸Šã’ãŸãƒ©ãƒ¼ãƒ¡ãƒ³ã€‚å¼·çƒˆãªå‘³ãŒãŠå¥½ã¿ã®æ–¹ã«ã´ã£ãŸã‚Šã€‚ãƒ©ãƒ¼æ²¹ã¨ãƒã‚®ã‚’ãƒˆãƒƒãƒ”ãƒ³ã‚°ã€‚",
meal3Name: "ã‚·ãƒ¼ãƒ•ãƒ¼ãƒ‰ãƒ©ãƒ¼ãƒ¡ãƒ³",
meal3Description: "ã‚¨ãƒ“ã€ã‚«ãƒ‹ã€æŸ”ã‚‰ã‹ãªé‡èœãŒå…¥ã£ãŸæ¿ƒåšãªæµ·ã®é¢¨å‘³ã®ã‚¹ãƒ¼ãƒ—ã§ä½œã‚‹æ–°é®®ãªã‚·ãƒ¼ãƒ•ãƒ¼ãƒ‰ãƒ©ãƒ¼ãƒ¡ãƒ³ã€‚ç´ æ™´ã‚‰ã—ã„æµ·ã®ä½“é¨“ã€‚",
meal4Name: "ãƒã‚­ãƒ³ç…§ã‚Šç„¼ãä¸¼",
meal4Description: "ã‚°ãƒªãƒ«ãƒã‚­ãƒ³ç…§ã‚Šç„¼ãã‚’è’¸ã—ç±³ã®ä¸Šã«ä¹—ã›ã€ã‚·ãƒ£ã‚­ã‚·ãƒ£ã‚­ã®é‡èœã¨ç‰¹è£½ç…§ã‚Šç„¼ãã‚½ãƒ¼ã‚¹ã§ä»•ä¸Šã’ã¾ã—ãŸã€‚ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæº€è¶³ã®ä¸€å“ã€‚",
meal5Name: "ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ã‚«ãƒ¬ãƒ¼",
meal5Description: "å­£ç¯€ã®é‡èœã€è±†è…ã€é¦™ã‚Šé«˜ã„ã‚¹ãƒ‘ã‚¤ã‚¹ã‚’ä½¿ã£ãŸé¦™ã‚Šè±Šã‹ãªãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ã‚«ãƒ¬ãƒ¼ã€ã‚¸ãƒ£ã‚¹ãƒŸãƒ³ãƒ©ã‚¤ã‚¹ä»˜ãã€‚ãƒ˜ãƒ«ã‚·ãƒ¼ã§é¢¨å‘³è±Šã‹ãªé¸æŠã€‚",
meal6Name: "ãƒ“ãƒ¼ãƒ•ã†ã©ã‚“",
meal6Description: "å¤ªã„ã†ã©ã‚“éººã«æŸ”ã‚‰ã‹ãªç‰›è‚‰ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’é†¤æ²¹ãƒ™ãƒ¼ã‚¹ã®æ—¨å‘³ã‚¹ãƒ¼ãƒ—ã§ã€ãƒã‚®ã¨ã‚­ãƒã‚³ã‚’ãƒˆãƒƒãƒ”ãƒ³ã‚°ã€‚å¿ƒæ¸©ã¾ã‚‹ã‚³ãƒ³ãƒ•ã‚©ãƒ¼ãƒˆæ–™ç†ã€‚",

// Order summary
orderSummaryTitle: "ã”æ³¨æ–‡",
noOrdersMessage: "ã¾ã æ³¨æ–‡ãŒã‚ã‚Šã¾ã›ã‚“",
totalText: "åˆè¨ˆ",
clearAllButton: "å…¨ã¦å‰Šé™¤",
removeItem: "ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤",
itemRemoved: "ã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ã—ã¾ã—ãŸ",

// Loading and messages
loadingText: "æ–™ç†ã‚’èª­ã¿è¾¼ã¿ä¸­...",
loadingProgress: "åˆæœŸåŒ–ä¸­...",
errorMessage: "æœ‰åŠ¹ãªãƒ†ãƒ¼ãƒ–ãƒ«ç•ªå·(1-17)ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
orderAdded: "æ³¨æ–‡ã‚’è¿½åŠ ã—ã¾ã—ãŸ",
addedToOrder: "æ³¨æ–‡ã«è¿½åŠ ã—ã¾ã—ãŸ"
},

id: {
// Table input
welcomeTitle: "Selamat datang di restoran kami!",
tableInputDescription: "Silakan masukkan nomor meja Anda untuk memulai pengalaman makan AR",
tableNumberPlaceholder: "Nomor Meja",
confirmTableButton: "Atur Nomor Meja",
tableRangeInfo: "Meja 1-17 tersedia",
backgroundLoadingText: "Menyiapkan Menu Anda...",

// Language selection
languageSelectionTitle: "Pilih Bahasa Anda / Choose Your Language",
continueButton: "Lanjutkan",

// Table display
tableText: "Meja",
yourOrderButton: "Pesanan Anda",

// Menu
menuTrigger: "MENU â˜°",
menuHeader: "Daftar Menu ğŸœï¸",
categoryTitle: "Model Demo",
orderButton: "Pesan",

// Model descriptions
misoRamenName: "Ramen Miso",
misoRamenDescription: "Ramen Jepang tradisional dengan kaldu kaya rasa, mie lembut, dan sayuran segar. Makanan favorit yang menghangatkan jiwa.",
spicyRamenName: "Ramen Pedas",
spicyRamenDescription: "Ramen pedas dengan campuran rempah ekstra, sempurna untuk mereka yang menyukai rasa intens. Dilengkapi minyak cabai dan daun bawang segar.",
meal3Name: "Ramen Seafood",
meal3Description: "Ramen seafood segar dengan udang, kepiting, dan sayuran lembut dalam kaldu kaya rasa laut. Pengalaman maritim yang menyenangkan.",
meal4Name: "Mangkuk Ayam Teriyaki",
meal4Description: "Ayam teriyaki panggang disajikan di atas nasi kukus dengan sayuran renyah dan saus teriyaki khas kami. Makanan seimbang dan memuaskan.",
meal5Name: "Kari Vegetarian",
meal5Description: "Kari vegetarian aromatik dengan sayuran musiman, tahu, dan rempah-rempah harum disajikan dengan nasi melati. Pilihan sehat dan lezat.",
meal6Name: "Udon Daging Sapi",
meal6Description: "Mie udon tebal dengan irisan daging sapi empuk dalam kaldu gurih berbasis kecap, ditaburi daun bawang dan jamur. Makanan hangat yang mengenyangkan.",

// Order summary
orderSummaryTitle: "Pesanan",
noOrdersMessage: "Belum ada pesanan",
totalText: "Total",
clearAllButton: "Hapus Semua",
removeItem: "Hapus item",
itemRemoved: "Item dihapus",

// Loading and messages
loadingText: "Memuat Makanan...",
loadingProgress: "Menginisialisasi...",
errorMessage: "Silakan masukkan nomor meja yang valid (1-17)",
orderAdded: "Pesanan ditambahkan",
addedToOrder: "Ditambahkan ke pesanan"
},

tr: {
// Table input
welcomeTitle: "RestoranÄ±mÄ±za hoØ› geldiniz!",
tableInputDescription: "AR yemek deneyiminizi baØ›latmak iÃ§in lÃ¼tfen masa numaranÄ±zÄ± girin",
tableNumberPlaceholder: "Masa NumarasÄ±",
confirmTableButton: "Masa NumarasÄ±nÄ± Ayarla",
tableRangeInfo: "Masa 1-17 mevcut",
backgroundLoadingText: "MenÃ¼nÃ¼z hazÄ±rlanÄ±yor...",

// Language selection
languageSelectionTitle: "Dilinizi SeÃ§in / Choose Your Language",
continueButton: "Devam Et",

// Table display
tableText: "Masa",
yourOrderButton: "SipariØ›iniz",

// Menu
menuTrigger: "MENÙ€ â˜°",
menuHeader: "MenÃ¼ Listesi ğŸœï¸",
categoryTitle: "Demo Modeller",
orderButton: "SipariØ› Ver",

// Model descriptions
misoRamenName: "Miso Ramen",
misoRamenDescription: "Zengin ve lezzetli et suyu, yumuØ›ak eriØ›te ve taze sebzelerle geleneksel Japon miso ramen. Ruhu Ä±sÄ±tan klasik bir favori.",
spicyRamenName: "AcÄ±lÄ± Ramen",
spicyRamenDescription: "Ekstra baharat karÄ±Ø›Ä±mÄ±yla ateØ›li acÄ± ramen, yoÄŸun tatlarÄ± sevenler iÃ§in mÃ¼kemmel. Biber yaÄŸÄ± ve taze yeØ›il soÄŸanla.",

meal3Name: "Deniz Ù€rÃ¼nleri Ramen",
meal3Description: "Karides, yengeÃ§ ve yumuØ›ak sebzelerle zengin okyanus lezzetli Ã§orbada taze deniz Ã¼rÃ¼nleri ramen. HoØ› bir denizcilik deneyimi.",
meal4Name: "Tavuk Teriyaki Kase",
meal4Description: "Buharda piØ›miØ› pirinÃ§ Ã¼zerine Ä±zgara tavuk teriyaki, gevrek sebzeler ve Ùzel teriyaki sosumuz ile servis edilir. Dengeli ve doyurucu bir ÙÄŸÃ¼n.",
meal5Name: "Vejetaryen KÙri",
meal5Description: "Mevsimlik sebzeler, tofu ve kokulu baharatlarla aromatik vejetaryen kÙri, yasemin pirinciyle servis edilir. SaÄŸlÄ±klÄ± ve lezzetli bir seÃ§im.",
meal6Name: "SÄ±ÄŸÄ±r Eti Udon",
meal6Description: "KalÄ±n udon eriØ›tesi ile yumuØ›ak sÄ±ÄŸÄ±r eti dilimleri, soya bazlÄ± lezzetli Ã§orbada, yeØ›il soÄŸan ve mantarla sÃ¼slenmiØ›. Doyurucu bir rahatlÄ±k yemeÄŸi.",

// Order summary
orderSummaryTitle: "SipariØ›ler",
noOrdersMessage: "HenÃ¼z sipariØ› yok",
totalText: "Toplam",
clearAllButton: "Hepsini Temizle",
removeItem: "Ø¶ÄŸeyi kaldÄ±r",
itemRemoved: "Ø¶ÄŸe kaldÄ±rÄ±ldÄ±",

// Loading and messages
loadingText: "Yemekler YÃ¼kleniyor...",
loadingProgress: "BaØ›latÄ±lÄ±yor...",
errorMessage: "LÃ¼tfen geÃ§erli bir masa numarasÄ± girin (1-17)",
orderAdded: "SipariØ› eklendi",
addedToOrder: "SipariØ›e eklendi"
},

bn: {
// Table input
welcomeTitle: "à¦†à¦®à¦¾à¦¦à§‡à¦° à¦°à§‡à¦¸à§à¦¤à§‹à¦°à¦¾à¦à¦¯à¦¼ à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®!",
tableInputDescription: "à¦†à¦ªà¦¨à¦¾à¦° AR à¦–à¦¾à¦¬à¦¾à¦°à§‡à¦° à¦…à¦­à¦¿à¦œà§à¦à¦¤à¦¾ à¦¶à§à¦°à§ à¦•à¦°à¦¤à§‡ à¦…à¦¨à§à¦—à§à¦°à¦¹ à¦•à¦°à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦Ÿà§‡à¦¬à¦¿à¦² à¦¨à¦®à§à¦¬à¦° à¦²à¦¿à¦–à§à¦¨",
tableNumberPlaceholder: "à¦Ÿà§‡à¦¬à¦¿à¦² à¦¨à¦®à§à¦¬à¦°",
confirmTableButton: "à¦Ÿà§‡à¦¬à¦¿à¦² à¦¨à¦®à§à¦¬à¦° à¦¸à§‡à¦Ÿ à¦•à¦°à§à¦¨",
tableRangeInfo: "à¦Ÿà§‡à¦¬à¦¿à¦² à§§-à§§à§­ à¦‰à¦ªà¦²à¦¬à§à¦§",
backgroundLoadingText: "à¦†à¦ªà¦¨à¦¾à¦° à¦®à§‡à¦¨à§ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡...",

// Language selection
languageSelectionTitle: "à¦†à¦ªà¦¨à¦¾à¦° à¦­à¦¾à¦·à¦¾ à¦¬à§‡à¦›à§‡ à¦¨à¦¿à¦¨ / Choose Your Language",
continueButton: "à¦šà¦¾à¦²à¦¿à¦¯à¦¼à§‡ à¦¯à¦¾à¦¨",

// Table display
tableText: "à¦Ÿà§‡à¦¬à¦¿à¦²",
yourOrderButton: "à¦†à¦ªà¦¨à¦¾à¦° à¦…à¦°à§à¦¡à¦¾à¦°",

// Menu
menuTrigger: "à¦®à§‡à¦¨à§ â˜°",
menuHeader: "à¦®à§‡à¦¨à§ à¦¤à¦¾à¦²à¦¿à¦•à¦¾ ğŸœï¸",
categoryTitle: "à¦¡à§‡à¦®à§‹ à¦®à¦¡à§‡à¦²",
orderButton: "à¦…à¦°à§à¦¡à¦¾à¦°",

// Model descriptions
misoRamenName: "à¦®à¦¿à¦¸à§‹ à¦°à¦¾à¦®à§‡à¦¨",
misoRamenDescription: "à¦à¦¤à¦¿à¦¹à§à¦¯à¦¬à¦¾à¦¹à§€ à¦œà¦¾à¦ªà¦¾à¦¨à¦¿ à¦®à¦¿à¦¸à§‹ à¦°à¦¾à¦®à§‡à¦¨ à¦¸à¦®à§ƒà¦¦à§à¦§ à¦à¦¬à¦‚ à¦¸à§à¦¬à¦¾à¦¦à¦¯à§à¦•à§à¦¤ à¦à§‹à¦², à¦•à§‹à¦®à¦² à¦¨à§à¦¡à¦²à¦¸ à¦à¦¬à¦‚ à¦¤à¦¾à¦œà¦¾ à¦¸à¦¬à¦œà¦¿ à¦¦à¦¿à¦¯à¦¼à§‡à¥¤ à¦à¦•à¦Ÿà¦¿ à¦†à¦°à¦¾à¦®à¦¦à¦¾à¦¯à¦¼à¦• à¦ªà§à¦°à¦¿à¦¯à¦¼ à¦–à¦¾à¦¬à¦¾à¦° à¦¯à¦¾ à¦¹à§ƒà¦¦à¦¯à¦¼à¦•à§‡ à¦‰à¦·à§à¦£ à¦•à¦°à§‡à¥¤",
spicyRamenName: "à¦à¦¾à¦² à¦°à¦¾à¦®à§‡à¦¨",
spicyRamenDescription: "à¦…à¦¤à¦¿à¦°à¦¿à¦•à§à¦¤ à¦®à¦¶à¦²à¦¾à¦° à¦®à¦¿à¦¶à§à¦°à¦£ à¦¦à¦¿à¦¯à¦¼à§‡ à¦œà§à¦¬à¦²à¦¨à§à¦¤ à¦—à¦°à¦® à¦°à¦¾à¦®à§‡à¦¨, à¦¯à¦¾à¦°à¦¾ à¦¤à§€à¦¬à§à¦° à¦¸à§à¦¬à¦¾à¦¦ à¦ªà¦›à¦¨à§à¦¦ à¦•à¦°à§‡à¦¨ à¦¤à¦¾à¦¦à§‡à¦° à¦œà¦¨à§à¦¯ à¦¨à¦¿à¦–à§à¦à¦¤à¥¤ à¦®à¦°à¦¿à¦šà§‡à¦° à¦¤à§‡à¦² à¦à¦¬à¦‚ à¦¤à¦¾à¦œà¦¾ à¦ªà§‡à¦à¦¯à¦¼à¦¾à¦œ à¦•à¦²à¦¿ à¦¦à¦¿à¦¯à¦¼à§‡ à¦Ÿà¦ªà¦¿à¦‚à¥¤",

meal3Name: "à¦¸à§€à¦«à§à¦¡ à¦°à¦¾à¦®à§‡à¦¨",
meal3Description: "à¦šà¦¿à¦‚à¦¡à¦¼à¦¿, à¦•à¦¾à¦¨à¦¿ à¦à¦¬à¦‚ à¦•à§‹à¦®à¦² à¦¸à¦¬à¦œà¦¿ à¦¦à¦¿à¦¯à¦¼à§‡ à¦¤à§ˆà¦°à¦¿ à¦¸à¦®à§ƒà¦¦à§à¦§ à¦¸à¦®à§à¦¦à§à¦°à§‡à¦° à¦¸à§à¦¬à¦¾à¦¦à¦¯à§à¦•à§à¦¤ à¦¸à§à¦Ÿà¦•à§‡ à¦¤à¦¾à¦œà¦¾ à¦¸à§€à¦«à§à¦¡ à¦°à¦¾à¦®à§‡à¦¨à¥¤ à¦à¦•à¦Ÿà¦¿ à¦†à¦¨à¦¨à§à¦¦à¦¦à¦¾à¦¯à¦¼à¦• à¦¸à¦®à§à¦¦à§à¦° à¦…à¦­à¦¿à¦œà§à¦à¦¤à¦¾à¥¤",
meal4Name: "à¦šà¦¿à¦•à§‡à¦¨ à¦Ÿà§‡à¦°à¦¿à¦¯à¦¼à¦¾à¦•à¦¿ à¦¬à§‹à¦²",
meal4Description: "à¦¸à§à¦Ÿà¦¿à¦®à¦¡ à¦°à¦¾à¦‡à¦¸à§‡à¦° à¦‰à¦ªà¦°à§‡ à¦—à§à¦°à¦¿à¦²à¦¡ à¦šà¦¿à¦•à§‡à¦¨ à¦Ÿà§‡à¦°à¦¿à¦¯à¦¼à¦¾à¦•à¦¿, à¦•à§à¦°à¦¿à¦¸à¦ªà¦¿ à¦¸à¦¬à¦œà¦¿ à¦à¦¬à¦‚ à¦†à¦®à¦¾à¦¦à§‡à¦° à¦¸à§à¦¬à¦¾à¦•à§à¦·à¦° à¦Ÿà§‡à¦°à¦¿à¦¯à¦¼à¦¾à¦•à¦¿ à¦¸à¦¸ à¦¦à¦¿à¦¯à¦¼à§‡ à¦ªà¦°à¦¿à¦¬à§‡à¦¶à¦¨ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à¥¤ à¦à¦•à¦Ÿà¦¿ à¦­à¦¾à¦°à¦¸à¦¾à¦®à§à¦¯à¦ªà§‚à¦°à§à¦£ à¦à¦¬à¦‚ à¦¸à¦¨à§à¦¤à§‹à¦·à¦œà¦¨à¦• à¦–à¦¾à¦¬à¦¾à¦°à¥¤",
meal5Name: "à¦­à§‡à¦œà¦¿à¦Ÿà§‡à¦°à¦¿à¦¯à¦¼à¦¾à¦¨ à¦•à¦¾à¦°à¦¿",
meal5Description: "à¦®à§Œà¦¸à§à¦®à¦¿ à¦¸à¦¬à¦œà¦¿, à¦Ÿà§‹à¦«à§ à¦à¦¬à¦‚ à¦¸à§à¦—à¦¨à§à¦§à¦¿ à¦®à¦¶à¦²à¦¾ à¦¦à¦¿à¦¯à¦¼à§‡ à¦¤à§ˆà¦°à¦¿ à¦¸à§à¦—à¦¨à§à¦§à¦¿ à¦­à§‡à¦œà¦¿à¦Ÿà§‡à¦°à¦¿à¦¯à¦¼à¦¾à¦¨ à¦•à¦¾à¦°à¦¿, à¦œà¦¾à¦¸à¦®à¦¿à¦¨ à¦°à¦¾à¦‡à¦¸ à¦¸à¦¹à¥¤ à¦à¦•à¦Ÿà¦¿ à¦¸à§à¦¬à¦¾à¦¸à§à¦¥à§à¦¯à¦•à¦° à¦à¦¬à¦‚ à¦¸à§à¦¬à¦¾à¦¦à¦¯à§à¦•à§à¦¤ à¦ªà¦›à¦¨à§à¦¦à¥¤",
meal6Name: "à¦¬à¦¿à¦« à¦‰à¦¦à¦¨",
meal6Description: "à¦ªà§à¦°à§ à¦‰à¦¦à¦¨ à¦¨à§à¦¡à¦²à¦¸ à¦¸à¦¹ à¦•à§‹à¦®à¦² à¦¬à¦¿à¦« à¦¸à§à¦²à¦¾à¦‡à¦¸, à¦¸à¦¯à¦¼ à¦­à¦¿à¦¤à§à¦¤à¦¿à¦• à¦¸à§à¦¬à¦¾à¦¦à¦¯à§à¦•à§à¦¤ à¦¸à§à¦Ÿà¦•à§‡, à¦¸à§à¦•à¦¾à¦²à¦¿à¦“à¦¨ à¦à¦¬à¦‚ à¦®à¦¾à¦¶à¦°à§à¦® à¦¦à¦¿à¦¯à¦¼à§‡ à¦¸à¦œà§à¦œà¦¿à¦¤à¥¤ à¦à¦•à¦Ÿà¦¿ à¦¹à§ƒà¦¦à¦¯à¦¼à¦ªà§à¦°à¦¸à¦¾à¦°à§€ à¦•à¦®à¦«à¦°à§à¦Ÿ à¦«à§à¦¡à¥¤",

// Order summary
orderSummaryTitle: "à¦…à¦°à§à¦¡à¦¾à¦°",
noOrdersMessage: "à¦à¦–à¦¨à¦“ à¦•à§‹à¦¨à§‹ à¦…à¦°à§à¦¡à¦¾à¦° à¦¨à§‡à¦‡",
totalText: "à¦®à§‹à¦Ÿ",
clearAllButton: "à¦¸à¦¬ à¦ªà¦°à¦¿à¦·à§à¦•à¦¾à¦° à¦•à¦°à§à¦¨",
removeItem: "à¦†à¦‡à¦Ÿà§‡à¦® à¦¸à¦°à¦¾à¦¨",
itemRemoved: "à¦†à¦‡à¦Ÿà§‡à¦® à¦¸à¦°à¦¾à¦¨à§‹ à¦¹à¦¯à¦¼à§‡à¦›à§‡",

// Loading and messages
loadingText: "à¦–à¦¾à¦¬à¦¾à¦° à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡...",
loadingProgress: "à¦¶à§à¦°à§ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡...",
errorMessage: "à¦…à¦¨à§à¦—à§à¦°à¦¹ à¦•à¦°à§‡ à¦à¦•à¦Ÿà¦¿ à¦¬à§ˆà¦§ à¦Ÿà§‡à¦¬à¦¿à¦² à¦¨à¦®à§à¦¬à¦° à¦²à¦¿à¦–à§à¦¨ (à§§-à§§à§­)",
orderAdded: "à¦…à¦°à§à¦¡à¦¾à¦° à¦¯à§‹à¦— à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡",
addedToOrder: "à¦…à¦°à§à¦¡à¦¾à¦°à§‡ à¦¯à§‹à¦— à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡"
},

ar: {
// Table input
welcomeTitle: "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…Ø·Ø¹Ù…Ù†Ø§!",
tableInputDescription: "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø·Ø§ÙˆÙ„ØªÙƒÙ… Ù„Ø¨Ø¯Ø¡ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø·Ø¹Ø§Ù… Ø¨Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø¹Ø²Ø²",
tableNumberPlaceholder: "Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©",
confirmTableButton: "ØªØ£ÙƒÙŠØ¯ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§ÙˆÙ„Ø©",
tableRangeInfo: "Ø§Ù„Ø·Ø§ÙˆÙ„Ø§Øª Ù…Ù† Ù¡-Ù¡Ù§ Ù…ØªØ§Ø­Ø©",
backgroundLoadingText: "Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…...",

// Language selection
languageSelectionTitle: "Ø§Ø®ØªØ± Ù„ØºØªÙƒ / Choose Your Language",
continueButton: "Ù…ØªØ§Ø¨Ø¹Ø©",

// Table display
tableText: "Ø·Ø§ÙˆÙ„Ø©",
yourOrderButton: "Ø·Ù„Ø¨Ø§ØªÙƒ",

// Menu
menuTrigger: "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù… â˜°",
menuHeader: "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù… ğŸœï¸",
categoryTitle: "Ù†Ù…Ø§Ø°Ø¬ ØªØ¬Ø±ÙŠØ¨ÙŠØ©",
orderButton: "Ø·Ù„Ø¨",

// Model descriptions
misoRamenName: "Ø±Ø§Ù…ÙŠÙ† Ù…ÙŠØ³Ùˆ",
misoRamenDescription: "Ø±Ø§Ù…ÙŠÙ† ÙŠØ§Ø¨Ø§Ù†ÙŠ ØªÙ‚Ù„ÙŠØ¯ÙŠ Ø¨Ù…Ø±Ù‚ Ø§Ù„Ù…ÙŠØ³Ùˆ Ø§Ù„ØºÙ†ÙŠ ÙˆØ§Ù„Ù„Ø°ÙŠØ°ØŒ Ù…Ø¹ Ù†ÙˆØ¯Ù„Ø² Ø·Ø±ÙŠØ© ÙˆØ®Ø¶Ø§Ø± Ø·Ø§Ø²Ø¬Ø©. Ø·Ø¹Ø§Ù… Ù…Ø±ÙŠØ­ Ù…ÙØ¶Ù„ ÙŠØ¯ÙØ¦ Ø§Ù„Ø±ÙˆØ­.",
spicyRamenName: "Ø±Ø§Ù…ÙŠÙ† Ø­Ø§Ø±",
spicyRamenDescription: "Ø±Ø§Ù…ÙŠÙ† Ø­Ø§Ø± Ø¨Ù…Ø²ÙŠØ¬ Ø¨Ù‡Ø§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©ØŒ Ù…Ø«Ø§Ù„ÙŠ Ù„Ù…Ø­Ø¨ÙŠ Ø§Ù„Ù†ÙƒÙ‡Ø§Øª Ø§Ù„Ù‚ÙˆÙŠØ©. Ù…ØºØ·Ù‰ Ø¨Ø²ÙŠØª Ø§Ù„ÙÙ„ÙÙ„ ÙˆØ§Ù„Ø¨ØµÙ„ Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„Ø·Ø§Ø²Ø¬.",

meal3Name: "Ø±Ø§Ù…ÙŠÙ† Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ©",
meal3Description: "Ø±Ø§Ù…ÙŠÙ† Ø§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ© Ø§Ù„Ø·Ø§Ø²Ø¬Ø© Ù…Ø¹ Ø§Ù„Ø±ÙˆØ¨ÙŠØ§Ù† ÙˆØ§Ù„ÙƒØ±Ø§Ø¨ ÙˆØ§Ù„Ø®Ø¶Ø±ÙˆØ§Øª Ø§Ù„Ù„ÙŠÙ†Ø© ÙÙŠ Ù…Ø±Ù‚ ØºÙ†ÙŠ Ø¨Ù†ÙƒÙ‡Ø© Ø§Ù„Ù…Ø­ÙŠØ·. ØªØ¬Ø±Ø¨Ø© Ø¨Ø­Ø±ÙŠØ© Ø³Ø§Ø­Ù‚Ø©.",
meal4Name: "Ø·Ø¨Ù‚ ØªÙŠØ±ÙŠØ§ÙƒÙŠ Ø§Ù„Ø¯Ø¬Ø§Ø¬",
meal4Description: "Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ Ø¨ØªÙŠØ±ÙŠØ§ÙƒÙŠ ÙŠÙÙ‚Ø¯Ù… ÙÙˆÙ‚ Ø§Ù„Ø£Ø±Ø² Ø§Ù„Ù…Ø·Ù‡Ùˆ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø®Ø§Ø± Ù…Ø¹ Ø§Ù„Ø®Ø¶Ø±ÙˆØ§Øª Ø§Ù„Ù…Ù‚Ø±Ù…Ø´Ø© ÙˆØµÙ„ØµØ© Ø§Ù„ØªÙŠØ±ÙŠØ§ÙƒÙŠ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù†Ø§. ÙˆØ¬Ø¨Ø© Ù…ØªÙˆØ§Ø²Ù†Ø© ÙˆÙ…Ø´Ø¨Ø¹Ø©.",
meal5Name: "ÙƒØ§Ø±ÙŠ Ù†Ø¨Ø§ØªÙŠ",
meal5Description: "ÙƒØ§Ø±ÙŠ Ù†Ø¨Ø§ØªÙŠ Ø¹Ø·Ø±ÙŠ Ù…Ø¹ Ø§Ù„Ø®Ø¶Ø±ÙˆØ§Øª Ø§Ù„Ù…ÙˆØ³Ù…ÙŠØ© ÙˆØ§Ù„ØªÙˆÙ‚ÙŠ ÙˆØ§Ù„ØªÙˆØ§Ø¨Ù„ Ø§Ù„Ø¹Ø·Ø±ÙŠØ© ÙŠÙÙ‚Ø¯Ù… Ù…Ø¹ Ø£Ø±Ø² Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†. Ø®ÙŠØ§Ø± ØµØ­ÙŠ ÙˆÙ„Ø°ÙŠØ°.",
meal6Name: "Ø£ÙˆØ¯Ù† Ø§Ù„Ù„Ø­Ù… Ø§Ù„Ø¨Ù‚Ø±ÙŠ",
meal6Description: "Ù†ÙˆØ¯Ù„Ø² Ø£ÙˆØ¯Ù† Ø³Ù…ÙŠÙƒØ© Ù…Ø¹ Ø´Ø±Ø§Ø¦Ø­ Ù„Ø­Ù… Ø¨Ù‚Ø±ÙŠ Ø·Ø±ÙŠØ© ÙÙŠ Ù…Ø±Ù‚ Ø­Ù„Ùˆ ÙˆÙ…Ø§Ù„Ø­ Ù‚Ø§Ø¦Ù… Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆÙŠØ§ØŒ Ù…ØºØ·Ø§Ø© Ø¨Ø§Ù„Ø¨ØµÙ„ Ø§Ù„Ø£Ø®Ø¶Ø± ÙˆØ§Ù„ÙØ·Ø±. ÙˆØ¬Ø¨Ø© Ù…Ø±ÙŠØ­Ø© Ø¯Ø§ÙØ¦Ø© Ø§Ù„Ù‚Ù„Ø¨.",

// Order summary
orderSummaryTitle: "Ø§Ù„Ø·Ù„Ø¨Ø§Øª",
noOrdersMessage: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯",
totalText: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹",
clearAllButton: "Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„",
removeItem: "Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù†ØµØ±",
itemRemoved: "ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ØµØ±",

// Loading and messages
loadingText: "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª...",
loadingProgress: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©...",
errorMessage: "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø·Ø§ÙˆÙ„Ø© ØµØ­ÙŠØ­ (Ù¡-Ù¡Ù§)",
orderAdded: "ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨",
addedToOrder: "Ø£ÙØ¶ÙŠÙ Ø¥Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨"
},

ko: {
// Table input
welcomeTitle: "ì €í¬ ë ˆìŠ¤í† ë‘ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!",
tableInputDescription: "AR ë‹¤ì´ë‹ ê²½í—˜ì„ ì‹œì‘í•˜ë ¤ë©´ í…Œì´ë¸” ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”",
tableNumberPlaceholder: "í…Œì´ë¸” ë²ˆí˜¸",
confirmTableButton: "í…Œì´ë¸” ë²ˆí˜¸ ì„¤ì •",
tableRangeInfo: "í…Œì´ë¸” 1-17 ì´ìš© ê°€ëŠ¥",
backgroundLoadingText: "ë©”ë‰´ ì¤€ë¹„ ì¤‘...",

// Language selection
languageSelectionTitle: "ì–¸ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš” / Choose Your Language",
continueButton: "ê³„ì†",

// Table display
tableText: "í…Œì´ë¸”",
yourOrderButton: "ì£¼ë¬¸",

// Menu
menuTrigger: "ë©”ë‰´ â˜°",
menuHeader: "ë©”ë‰´ ëª©ë¡ ğŸœï¸",
categoryTitle: "ë°ëª¨ ëª¨ë¸",
orderButton: "ì£¼ë¬¸",

// Model descriptions
misoRamenName: "ë¯¸ì†Œ ë¼ë©˜",
misoRamenDescription: "ì§„í•œ í’ë¯¸ì˜ êµ­ë¬¼ê³¼ ë¶€ë“œëŸ¬ìš´ ë©´, ì‹ ì„ í•œ ì•¼ì±„ê°€ ë“¤ì–´ê°„ ì „í†µ ì¼ë³¸ì‹ ë¯¸ì†Œ ë¼ë©˜. ë§ˆìŒì„ ë”°ëœ»í•˜ê²Œ í•´ì£¼ëŠ” ëŒ€í‘œ ìŒì‹ì…ë‹ˆë‹¤.",
spicyRamenName: "ë§¤ìš´ ë¼ë©˜",
spicyRamenDescription: "íŠ¹ì œ ìŠ¤íŒŒì´ìŠ¤ ë¸”ë Œë“œë¡œ ë§¤ì½¤í•˜ê²Œ ë§Œë“  ë¼ë©˜. ê°•ë ¬í•œ ë§›ì„ ì¢‹ì•„í•˜ëŠ” ë¶„ë“¤ì—ê²Œ ì™„ë²½í•©ë‹ˆë‹¤. ì¹ ë¦¬ ì˜¤ì¼ê³¼ ëŒ€íŒŒ í† í•‘.",

meal3Name: "ì”¨í‘¸ë“œ ë¼ë©˜",
meal3Description: "ìƒˆìš°, ê²Œ, ë¶€ë“œëŸ¬ìš´ ì•¼ì±„ê°€ ë“¤ì–´ê°„ ì§„í•œ í•´ì‚°ë¬¼ ë§›ì˜ êµ­ë¬¼ì— ë‹´ì€ ì‹ ì„ í•œ ì”¨í‘¸ë“œ ë¼ë©˜. ë©‹ì§„ í•´ì–‘ ê²½í—˜.",
meal4Name: "ì¹˜í‚¨ í…Œë¦¬ì•¼í‚¤ ë³¼",
meal4Description: "ê·¸ë¦´ë“œ ì¹˜í‚¨ í…Œë¦¬ì•¼í‚¤ë¥¼ ì° ë°¥ ìœ„ì— ì˜¬ë¦¬ê³  ë°”ì‚­í•œ ì•¼ì±„ì™€ íŠ¹ì œ í…Œë¦¬ì•¼í‚¤ ì†ŒìŠ¤ë¡œ ë§ˆë¬´ë¦¬í•œ ìš”ë¦¬. ê· í˜• ì¡íŒ ë§Œì¡±ìŠ¤ëŸ¬ìš´ ì‹ì‚¬.",
meal5Name: "ì±„ì‹ì£¼ì˜ì ì¹´ë ˆ",
meal5Description: "ì œì²  ì•¼ì±„, ë‘ë¶€, í–¥ê¸‹í•œ í–¥ì‹ ë£Œë¡œ ë§Œë“  í–¥ê¸°ë¡œìš´ ì±„ì‹ì£¼ì˜ì ì¹´ë ˆ, ì¬ìŠ¤ë¯¼ ìŒ€ê³¼ í•¨ê»˜ ì œê³µ. ê±´ê°•í•˜ê³  ë§›ìˆëŠ” ì„ íƒ.",
meal6Name: "ì†Œê³ ê¸° ìš°ë™",
meal6Description: "êµµì€ ìš°ë™ ë©´ì— ë¶€ë“œëŸ¬ìš´ ì†Œê³ ê¸° ìŠ¬ë¼ì´ìŠ¤ë¥¼ ë‹´ê³ , ê°„ì¥ ë² ì´ìŠ¤ì˜ ì§„í•œ êµ­ë¬¼ì— ì–‘íŒŒì™€ ë²„ì„¯ì„ ì–¹ì–´ ì™„ì„±. ë§ˆìŒì„ ë”°ëœ»í•˜ê²Œ í•˜ëŠ” ë“ ë“ í•œ ì‹ì‚¬.",

// Order summary
orderSummaryTitle: "ì£¼ë¬¸",
noOrdersMessage: "ì•„ì§ ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤",
totalText: "ì´ì•¡",
clearAllButton: "ëª¨ë‘ ì‚­ì œ",

// Loading and messages
loadingText: "ìš”ë¦¬ ë¡œë”© ì¤‘...",
loadingProgress: "ì´ˆê¸°í™” ì¤‘...",
errorMessage: "ìœ íš¨í•œ í…Œì´ë¸” ë²ˆí˜¸(1-17)ë¥¼ ì…ë ¥í•˜ì„¸ìš”",
orderAdded: "ì£¼ë¬¸ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤",
addedToOrder: "ì£¼ë¬¸ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"
},

zh: {
// Table input
welcomeTitle: "æ¬¢è¿å…‰ä¸´æœ¬é¤å…ï¼",
tableInputDescription: "è¯·è¾“å…¥æ‚¨çš„æ¡Œå·å¼€å§‹ARç”¨é¤ä½“éªŒ",
tableNumberPlaceholder: "æ¡Œå·",
confirmTableButton: "è®¾ç½®æ¡Œå·",
tableRangeInfo: "æ¡Œå­1-17å¯ç”¨",
backgroundLoadingText: "æ­£åœ¨å‡†å¤‡èœå•...",

// Language selection
languageSelectionTitle: "é€‰æ‹©æ‚¨çš„è¯­è¨€ / Choose Your Language",
continueButton: "ç»§ç»­",

// Table display
tableText: "æ¡Œå­",
yourOrderButton: "æ‚¨çš„è®¢å•",

// Menu
menuTrigger: "èœå• â˜°",
menuHeader: "èœå•åˆ—è¡¨ ğŸœï¸",
categoryTitle: "æ¼”ç¤ºæ¨¡å‹",
orderButton: "è®¢è´­",

// Model descriptions
misoRamenName: "å‘³å™Œæ‹‰é¢",
misoRamenDescription: "ä¼ ç»Ÿæ—¥å¼å‘³å™Œæ‹‰é¢ï¼Œé…æœ‰æµ“éƒé²œç¾çš„æ±¤åº•ã€å«©æ»‘é¢æ¡å’Œæ–°é²œè”¬èœã€‚æ¸©æš–å¿ƒçµçš„ç»å…¸ç¾é£Ÿã€‚",
spicyRamenName: "è¾£å‘³æ‹‰é¢",
spicyRamenDescription: "ç‰¹åˆ¶é¦™æ–™è°ƒé…çš„ç«è¾£æ‹‰é¢ï¼Œå®Œç¾é€‚åˆå–œçˆ±å¼ºçƒˆå£å‘³çš„äººã€‚é…æœ‰è¾£æ¤’æ²¹å’Œæ–°é²œå°è‘±ã€‚",

meal3Name: "æµ·é²œæ‹‰é¢",
meal3Description: "æ–°é²œæµ·é²œæ‹‰é¢ï¼Œé…æœ‰è™¾ã€èŸ¹å’Œå«©æ»‘è”¬èœï¼Œèå…¥æµ“éƒçš„æµ·æ´‹é£å‘³æ±¤åº•ã€‚ä¸€æ¬¡ç¾å¦™çš„æµ·æ´‹ä½“éªŒã€‚",
meal4Name: "ç…§çƒ§é¸¡è‚‰ç¢—",
meal4Description: "çƒ¤ç…§çƒ§é¸¡è‚‰é…è’¸ç±³é¥­ï¼Œæ­é…çˆ½è„†è”¬èœå’Œæˆ‘ä»¬çš„ç‰¹åˆ¶ç…§çƒ§é…±ã€‚å‡è¡¡è€Œä»¤äººæ»¡è¶³çš„ä¸€é¤ã€‚",
meal5Name: "ç´ é£Ÿå’–å–±",
meal5Description: "é¦™æ–™ä¸°å¯Œçš„ç´ é£Ÿå’–å–±ï¼Œé…æœ‰åº”å­£è”¬èœã€è±†è…å’ŒèŠ³é¦™é¦™æ–™ï¼Œæ­é…èŒ‰è‰é¦™ç±³ã€‚å¥åº·è€Œç¾å‘³çš„é€‰æ‹©ã€‚",
meal6Name: "ç‰›è‚‰ä¹Œå†¬é¢",
meal6Description: "ç²—ä¹Œå†¬é¢æ¡é…å«©æ»‘ç‰›è‚‰ç‰‡ï¼Œèå…¥é²œç¾çš„é…±æ²¹æ±¤åº•ï¼Œç‚¹ç¼€é’è‘±å’Œè˜‘è‡ã€‚æš–å¿ƒçš„èˆ’é€‚ç¾é£Ÿã€‚",

// Order summary
orderSummaryTitle: "è®¢å•",
noOrdersMessage: "æš‚æ— è®¢å•",
totalText: "æ€»è®¡",
clearAllButton: "æ¸…é™¤å…¨éƒ¨",

// Loading and messages
loadingText: "æ­£åœ¨åŠ è½½èœå“...",
loadingProgress: "åˆå§‹åŒ–ä¸­...",
errorMessage: "è¯·è¾“å…¥æœ‰æ•ˆçš„æ¡Œå·(1-17)",
orderAdded: "å·²æ·»åŠ è®¢å•",
addedToOrder: "å·²æ·»åŠ åˆ°è®¢å•"
},

es: {
// Table input
welcomeTitle: "ØŒBienvenido a nuestro restaurante!",
tableInputDescription: "Por favor ingrese su nÙ’mero de mesa para comenzar su experiencia gastronÙmica AR",
tableNumberPlaceholder: "NÙ’mero de Mesa",
confirmTableButton: "Establecer NÙ’mero de Mesa",
tableRangeInfo: "Mesas 1-17 disponibles",
backgroundLoadingText: "Preparando su MenÙ’...",

// Language selection
languageSelectionTitle: "Elija su idioma / Choose Your Language",
continueButton: "Continuar",

// Table display
tableText: "Mesa",
yourOrderButton: "Su Pedido",

// Menu
menuTrigger: "MENØ¹ â˜°",
menuHeader: "Lista de MenÙ’ ğŸœï¸",
categoryTitle: "Modelos Demo",
orderButton: "Ordenar",

// Model descriptions
misoRamenName: "Ramen Miso",
misoRamenDescription: "Ramen japonÃ©s tradicional con caldo rico y sabroso, fideos tiernos y verduras frescas. Un favorito reconfortante que calienta el alma.",
spicyRamenName: "Ramen Picante",
spicyRamenDescription: "Ramen ardiente con mezcla extra de especias, perfecto para aquellos que aman sabores intensos. Cubierto con aceite de chile y cebolletas frescas.",

meal3Name: "Ramen de Mariscos",
meal3Description: "Ramen de mariscos frescos con camarones, cangrejo y vegetales tiernos en un rico caldo con sabor a ocÃ©ano. Una experiencia marÃ­tima encantadora.",
meal4Name: "TazÃ³n de Pollo Teriyaki",
meal4Description: "Pollo teriyaki a la parrilla servido sobre arroz al vapor con vegetales crujientes y nuestra salsa teriyaki especial. Una comida equilibrada y satisfactoria.",
meal5Name: "Curry Vegetariano",
meal5Description: "Curry vegetariano aromÃ¡tico con vegetales de temporada, tofu y especias fragantes servido con arroz jazmÃ­n. Una opciÃ³n saludable y sabrosa.",
meal6Name: "Udon de Res",
meal6Description: "Fideos udon gruesos con rebanadas de carne de res tierna en un sabroso caldo a base de soya, coronado con cebollines y hongos. Una reconfortante comida contundente.",

// Order summary
orderSummaryTitle: "Pedidos",
noOrdersMessage: "AÙ’n no hay pedidos",
totalText: "Total",
clearAllButton: "Limpiar Todo",

// Loading and messages
loadingText: "Cargando Comidas...",
loadingProgress: "Inicializando...",
errorMessage: "Por favor ingrese un nÙ’mero de mesa vÙ„lido (1-17)",
orderAdded: "Pedido agregado",
addedToOrder: "Agregado al pedido"
},

fr: {
// Table input
welcomeTitle: "Bienvenue dans notre restaurant!",
tableInputDescription: "Veuillez saisir votre numÃ©ro de table pour commencer votre expÃ©rience culinaire AR",
tableNumberPlaceholder: "NumÃ©ro de Table",
confirmTableButton: "DÃ©finir le NumÃ©ro de Table",
tableRangeInfo: "Tables 1-17 disponibles",
backgroundLoadingText: "PrÃ©paration de votre Menu...",

// Language selection
languageSelectionTitle: "Choisissez votre langue / Choose Your Language",
continueButton: "Continuer",

// Table display
tableText: "Table",
yourOrderButton: "Votre Commande",

// Menu
menuTrigger: "MENU â˜°",
menuHeader: "Liste des Menus ğŸœï¸",
categoryTitle: "ModÃ¨les DÃ©mo",
orderButton: "Commander",

// Model descriptions
misoRamenName: "Ramen Miso",
misoRamenDescription: "Ramen japonais traditionnel avec un bouillon riche et savoureux, des nouilles tendres et des lÃ©gumes frais. Un favori rÃ©confortant qui rÃ©chauffe l'Ã¢me.",
spicyRamenName: "Ramen Ø©picÃ©",
spicyRamenDescription: "Ramen ardent avec un mÃ©lange d'Ã©pices supplÃ©mentaires, parfait pour ceux qui aiment les saveurs intenses. Garni d'huile de piment et d'oignons verts frais.",

meal3Name: "Ramen aux Fruits de Mer",
meal3Description: "Ramen aux fruits de mer frais avec des crevettes, du crabe et des lÃ©gumes tendres dans un riche bouillon aux saveurs ocÃ©aniques. Une dÃ©licieuse expÃ©rience maritime.",
meal4Name: "Bol de Poulet Teriyaki",
meal4Description: "Poulet teriyaki grillÃ© servi sur du riz Ã  la vapeur avec des lÃ©gumes croquants et notre sauce teriyaki signature. Un repas Ã©quilibrÃ© et satisfaisant.",
meal5Name: "Curry VÃ©gÃ©tarien",
meal5Description: "Curry vÃ©gÃ©tarien aromatique avec des lÃ©gumes de saison, du tofu et des Ã©pices parfumÃ©es servi avec du riz jasmin. Un choix sain et savoureux.",
meal6Name: "Udon au BÅ“uf",
meal6Description: "Nouilles udon Ã©paisses avec des tranches de bÅ“uf tendre dans un savoureux bouillon Ã  base de soja, garni de ciboulette et de champignons. Un rÃ©confortant plat copieux.",

// Order summary
orderSummaryTitle: "Commandes",
noOrdersMessage: "Pas encore de commandes",
totalText: "Total",
clearAllButton: "Tout Effacer",

// Loading and messages
loadingText: "Chargement des Repas...",
loadingProgress: "Initialisation...",
errorMessage: "Veuillez saisir un numÃ©ro de table valide (1-17)",
orderAdded: "Commande ajoutÃ©e",
addedToOrder: "AjoutÃ© Ã  la commande"
}
};

// Main AR Application
class ARViewer {
constructor() {
this.scene = null;
this.camera = null;
this.renderer = null;
this.video = null;
this.canvas = null;
this.currentModel = null;
this.isArActive = false;
this.frameId = null;
this.typingTimeout = null;

// Model loading state protection
this.isLoadingModel = false;
this.lastSwitchTime = 0;
this.switchCooldown = 300; // 300ms cooldown between switches

// Language system
this.currentLanguage = 'en';
this.languageSelected = false;

// Restaurant features
this.tableNumber = null;
this.isTableNumberSet = false;
this.firstModelLoaded = false;
this.tableOrders = []; // Store orders for current table

// GLB/Draco loader setup
this.gltfLoader = new THREE.GLTFLoader();
this.dracoLoader = new THREE.DRACOLoader();
this.dracoLoader.setDecoderPath('https://www.gstatic.com/draco/v1/decoders/');
this.gltfLoader.setDRACOLoader(this.dracoLoader);

// Model caching
this.modelCache = new Map();

// Model Configuration System with translation keys
this.modelConfigs = {
meal2: {
path: 'assets/meal2_draco.glb',
position: { x: 0, y: -0.15, z: -1.2 },
rotation: { x: 0.5, y: 0, z: 0 }, 
scale:    { x: 0.25, y: 0.25, z: 0.25, },
autoRotate: true,
rotationSpeed: 0.003,
nameKey: "spicyRamenName",
descriptionKey: "spicyRamenDescription",
price: "Â¥1,200"
},
meal: {
path: 'assets/meal_draco.glb',
position: { x: 0, y: -0.1, z: -0.8 },
rotation: { x: 0.5, y: 0, z: 0 }, 
scale:    { x: 0.20, y: 0.20, z: 0.20, },
autoRotate: true,
rotationSpeed: 0.003,
nameKey: "misoRamenName",
descriptionKey: "misoRamenDescription",
price: "Â¥1,000"
},
meal3: {
path: 'assets/meal3_draco.glb',
position: { x: 0, y: -0.1, z: -0.8 },
rotation: { x: 0.5, y: 0, z: 0 }, 
scale:    { x: 0.60, y: 0.60, z: 0.60, },
autoRotate: true,
rotationSpeed: 0.003,
nameKey: "meal3Name",
descriptionKey: "meal3Description",
price: "Â¥950"
},
meal4: {
path: 'assets/meal4_draco.glb',
position: { x: 0, y: -0.1, z: -0.8 },
rotation: { x: 0.5, y: 0, z: 0 }, 
scale:    { x: 0.60, y: 0.60, z: 0.60, },
autoRotate: true,
rotationSpeed: 0.003,
nameKey: "meal4Name",
descriptionKey: "meal4Description",
price: "Â¥1,100"
},
meal5: {
path: 'assets/meal5_draco.glb',
position: { x: 0, y: -0.1, z: -0.8 },
rotation: { x: 0.5, y: 0, z: 0 }, 
scale:    { x: 0.60, y: 0.60, z: 0.60, },
autoRotate: true,
rotationSpeed: 0.003,
nameKey: "meal5Name",
descriptionKey: "meal5Description",
price: "Â¥1,300"
},
meal6: {
path: 'assets/meal6_draco.glb',
position: { x: 0, y: -0.1, z: -0.8 },
rotation: { x: 0.5, y: 0, z: 0 }, 
scale:    { x: 0.60, y: 0.60, z: 0.60, },
autoRotate: true,
rotationSpeed: 0.003,
nameKey: "meal6Name",
descriptionKey: "meal6Description",
price: "Â¥1,400"
}
};

// Create ordered array for navigation
this.modelKeys = Object.keys(this.modelConfigs);
this.currentModelIndex = 0;
this.currentModelKey = null;

this.init();
}

// Language management methods
getText(key) {
return translations[this.currentLanguage][key] || translations['en'][key] || key;
}

setLanguage(language) {
if (translations[language]) {
this.currentLanguage = language;
this.languageSelected = true;
console.log(`ğŸŒ Language set to: ${language}`);
this.updateAllTexts();
} else {
console.warn(`âŒ Language not supported: ${language}`);
}
}

updateAllTexts() {
if (!this.languageSelected) return;

console.log(`ğŸŒ Updating all texts to language: ${this.currentLanguage}`);

// Update menu texts - safely check if elements exist
const menuTrigger = document.getElementById('menuTrigger');
if (menuTrigger) {
const menuTextSpan = menuTrigger.querySelector('.menu-text');
if (menuTextSpan) {
menuTextSpan.textContent = this.getText('menuTrigger');
} else {
// Fallback: update the entire menuTrigger content
menuTrigger.innerHTML = `<span class="menu-text">${this.getText('menuTrigger')}</span>`;
}
}

const menuHeader = document.querySelector('.menu-header');
if (menuHeader) menuHeader.textContent = this.getText('menuHeader');

const categoryTitle = document.querySelector('.category-title');
if (categoryTitle) categoryTitle.textContent = this.getText('categoryTitle');

const viewOrdersBtn = document.getElementById('viewOrdersBtn');
if (viewOrdersBtn) viewOrdersBtn.textContent = this.getText('yourOrderButton');

// Update continue button text
const continueBtn = document.getElementById('continueBtn');
if (continueBtn) continueBtn.textContent = this.getText('continueButton');

// Update menu items
this.updateMenuItems();

// Update table display if set
if (this.tableNumber) {
const tableNumberText = document.getElementById('tableNumberText');
if (tableNumberText) {
tableNumberText.textContent = `${this.getText('tableText')} ${this.tableNumber}`;
}
}

// Update order summary elements
const orderSummaryTitle = document.getElementById('orderSummaryTitle');
if (orderSummaryTitle) {
orderSummaryTitle.textContent = `Table ${this.tableNumber || ''} ${this.getText('orderSummaryTitle')}`;
}

const clearOrdersBtn = document.getElementById('clearOrdersBtn');
if (clearOrdersBtn) clearOrdersBtn.textContent = this.getText('clearAllButton');

// Update current model info if displayed
if (this.currentModelKey) {
this.showModelInfo(this.modelConfigs[this.currentModelKey]);
}

// Update loading text elements
const loadingText = document.getElementById('loadingText');
if (loadingText) loadingText.textContent = this.getText('loadingText');

const loadingProgress = document.getElementById('loadingProgress');
if (loadingProgress) loadingProgress.textContent = this.getText('loadingProgress');

console.log(`âœ… All texts updated to ${this.currentLanguage}`);
}

updateMenuItems() {
Object.keys(this.modelConfigs).forEach(key => {
const config = this.modelConfigs[key];
const menuItem = document.querySelector(`[data-model-key="${key}"]`);
if (menuItem) {
const nameElement = menuItem.querySelector('.item-name');
const descElement = menuItem.querySelector('.item-description');
const orderBtn = menuItem.querySelector('.menu-order-btn');

if (nameElement) nameElement.textContent = this.getText(config.nameKey);
if (descElement) descElement.textContent = this.getText(config.descriptionKey);
if (orderBtn) orderBtn.textContent = this.getText('orderButton');
}
});
}

showLanguageSelection() {
const languageOverlay = document.getElementById('languageSelectionOverlay');
languageOverlay.classList.add('visible');

// Setup language option event listeners
document.querySelectorAll('.language-option').forEach(option => {
option.addEventListener('click', (e) => {
// Remove selected class from all options
document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('selected'));
// Add selected class to clicked option
e.currentTarget.classList.add('selected');

const selectedLang = e.currentTarget.getAttribute('data-lang');
console.log(`ğŸŒ Language selected: ${selectedLang}`);

// Enable continue button
const continueBtn = document.getElementById('confirmLanguageButton');
continueBtn.disabled = false;
continueBtn.setAttribute('data-selected-lang', selectedLang);
});
});

// Setup continue button
document.getElementById('confirmLanguageButton').addEventListener('click', () => {
const selectedLang = document.getElementById('confirmLanguageButton').getAttribute('data-selected-lang');
if (selectedLang) {
this.confirmLanguage(selectedLang);
}
});
}

confirmLanguage(language) {
this.setLanguage(language);

// Hide language selection overlay
const languageOverlay = document.getElementById('languageSelectionOverlay');
languageOverlay.classList.remove('visible');

// Show table number display
this.showTableNumberDisplay();

console.log(`âœ… Language confirmed: ${language}`);

// If first model is already loaded, show it immediately
if (this.firstModelLoaded && this.currentModel) {
this.showModelInterface();
} else {
// Only show loading overlay if first model isn't cached
const firstModelKey = this.modelKeys[0];
const firstModelConfig = this.modelConfigs[firstModelKey];
if (!this.modelCache.has(firstModelConfig.path)) {
// Show loading overlay while waiting for model
this.showLoading(this.getText('loadingText'), `${this.getText('tableText')} ${this.tableNumber} - ${this.getText('loadingProgress')}`);
}
}
}

showInitialSelection() {
const initialOverlay = document.getElementById('initialSelectionOverlay');
initialOverlay.classList.remove('hidden');

// Generate table options
this.generateTableOptions();

// Setup event listeners for selection boxes
const languageBox = document.getElementById('languageBox');
const tableBox = document.getElementById('tableBox');
const continueBtn = document.getElementById('continueBtn');

languageBox.addEventListener('click', (e) => {
e.stopPropagation();
this.toggleLanguageDropdown();
});

tableBox.addEventListener('click', (e) => {
e.stopPropagation();
this.toggleTableDropdown();
});

continueBtn.addEventListener('click', () => {
if (this.languageSelected && this.isTableNumberSet) {
this.startARExperience();
}
});

// Setup language option listeners with proper event handling
setTimeout(() => {
const languageOptions = document.querySelectorAll('.language-option');
console.log('Found language options:', languageOptions.length);
languageOptions.forEach((option, index) => {
const lang = option.getAttribute('data-lang');
console.log(`Setting up language option ${index}: ${lang}`);
option.addEventListener('click', (e) => {
e.preventDefault();
e.stopPropagation();
const selectedLang = option.getAttribute('data-lang');
console.log('Initial language option clicked:', selectedLang);
this.selectLanguage(selectedLang);
}, true);
});
}, 200);

// Close dropdowns when clicking outside
document.addEventListener('click', (e) => {
const languageDropdown = document.getElementById('languageDropdown');
const tableDropdown = document.getElementById('tableDropdown');
const languageBox = document.getElementById('languageBox');
const tableBox = document.getElementById('tableBox');

if (!languageBox.contains(e.target) && !languageDropdown.contains(e.target)) {
languageDropdown.classList.remove('visible');
}
if (!tableBox.contains(e.target) && !tableDropdown.contains(e.target)) {
tableDropdown.classList.remove('visible');
}
});

console.log('ğŸŒ Initial selection screen displayed');
}

generateTableOptions() {
const tableOptions = document.getElementById('tableOptions');
tableOptions.innerHTML = '';

for (let i = 1; i <= 17; i++) {
const option = document.createElement('button');
option.className = 'table-option';
option.textContent = i.toString();
option.setAttribute('data-table', i.toString());
option.addEventListener('click', (e) => {
e.stopPropagation();
this.selectTable(parseInt(e.target.getAttribute('data-table')));
});
tableOptions.appendChild(option);
}
}

toggleLanguageDropdown() {
const dropdown = document.getElementById('languageDropdown');
const tableDropdown = document.getElementById('tableDropdown');
const languageBox = document.getElementById('languageBox');

// Close table dropdown if open to prevent interference
tableDropdown.classList.remove('visible');
document.getElementById('tableBox').style.zIndex = 'auto';

// Toggle language dropdown
if (dropdown.classList.contains('visible')) {
dropdown.classList.remove('visible');
languageBox.style.zIndex = 'auto';
} else {
dropdown.classList.add('visible');
// Ensure language box and dropdown are above table elements
languageBox.style.zIndex = '3350';
console.log('Language dropdown opened');

// Attach fresh event listeners to language options
setTimeout(() => {
const languageOptions = document.querySelectorAll('.language-option');
languageOptions.forEach(option => {
// Remove existing listeners by cloning
const newOption = option.cloneNode(true);
option.parentNode.replaceChild(newOption, option);

// Add new event listener
newOption.addEventListener('click', (e) => {
e.preventDefault();
e.stopPropagation();
const selectedLang = newOption.getAttribute('data-lang');
console.log('Language option clicked:', selectedLang);
this.selectLanguage(selectedLang);
}, true);
});
}, 10);
}
}

toggleTableDropdown() {
const dropdown = document.getElementById('tableDropdown');
const languageDropdown = document.getElementById('languageDropdown');
const tableBox = document.getElementById('tableBox');

// Close language dropdown if open to prevent interference
languageDropdown.classList.remove('visible');
document.getElementById('languageBox').style.zIndex = 'auto';

// Toggle table dropdown
if (dropdown.classList.contains('visible')) {
dropdown.classList.remove('visible');
tableBox.style.zIndex = 'auto';
} else {
dropdown.classList.add('visible');
tableBox.style.zIndex = '3300';
console.log('Table dropdown opened');
}
}

selectLanguage(language) {
console.log('selectLanguage called with:', language);

// Set the language in the system
if (translations[language]) {
this.currentLanguage = language;
this.languageSelected = true;
console.log(`ğŸŒ Language set to: ${language}`);

// IMPORTANT: Update all text elements throughout the app
this.updateAllTexts();
} else {
console.warn(`âŒ Language not supported: ${language}`);
return;
}

// Update UI elements
const languageBox = document.getElementById('languageBox');
const languageText = document.getElementById('languageText');
const languageDropdown = document.getElementById('languageDropdown');

const languageNames = {
en: 'English',
ja: 'æ—¥æœ¬èª',
id: 'Bahasa Indonesia',
tr: 'TÃ¼rkÃ§e',
bn: 'à¦¬à¦¾à¦‚à¦²à¦¾',
ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'
};

// Update the text inside the white box
languageText.textContent = languageNames[language] || 'English';

// Add selected styling
languageBox.classList.add('selected');

// Close the dropdown (fold in)
languageDropdown.classList.remove('visible');
languageBox.style.zIndex = 'auto';

console.log(`âœ… Language selected and all text updated: ${languageNames[language]}`);
this.checkContinueButton();
}

selectTable(tableNumber) {
this.tableNumber = tableNumber;
this.isTableNumberSet = true;

// Update UI
const tableBox = document.getElementById('tableBox');
const tableText = document.getElementById('tableText');
const tableDropdown = document.getElementById('tableDropdown');

// Clear previous selections
document.querySelectorAll('.table-option').forEach(opt => opt.classList.remove('selected'));
// Highlight selected option
document.querySelector(`[data-table="${tableNumber}"]`).classList.add('selected');

tableText.textContent = `Table ${tableNumber}`;
tableBox.classList.add('selected');
tableDropdown.classList.remove('visible');

console.log(`âœ… Table selected: ${tableNumber}`);
this.checkContinueButton();
}

checkContinueButton() {
const continueBtn = document.getElementById('continueBtn');
if (this.languageSelected && this.isTableNumberSet) {
continueBtn.disabled = false;
continueBtn.classList.add('ready');
continueBtn.textContent = 'Continue';
} else {
continueBtn.disabled = true;
continueBtn.classList.remove('ready');
continueBtn.textContent = 'Continue';
}
}

startARExperience() {
// Hide initial selection overlay
const initialOverlay = document.getElementById('initialSelectionOverlay');
initialOverlay.classList.add('hidden');

// Show table number display
this.showTableNumberDisplay();

// If first model is already loaded, show it immediately
if (this.firstModelLoaded && this.currentModel) {
this.showModelInterface();
} else {
// Only show loading overlay if first model isn't cached
const firstModelKey = this.modelKeys[0];
const firstModelConfig = this.modelConfigs[firstModelKey];
if (!this.modelCache.has(firstModelConfig.path)) {
// Show loading overlay while waiting for model
this.showLoading(this.getText('loadingText'), `${this.getText('tableText')} ${this.tableNumber} - ${this.getText('loadingProgress')}`);
}
}
}

showTableNumberDisplay() {
const tableDisplay = document.getElementById('tableNumberDisplay');
const tableText = document.getElementById('tableNumberText');

tableText.textContent = `${this.getText('tableText')} ${this.tableNumber}`;
tableDisplay.classList.remove('hidden');
tableDisplay.classList.add('visible');
}

preloadAllModels() {
Object.entries(this.modelConfigs).forEach(([key, config]) => {
if (!this.modelCache.has(config.path)) {
this.gltfLoader.load(
config.path,
(gltf) => {
// Cache the model once loaded
this.modelCache.set(config.path, {
scene: gltf.scene,
animations: gltf.animations || [],
brightnessEnhanced: false // Track if brightness enhancement has been applied
});
console.log(`âœ… Preloaded: ${key} (${config.path})`);
},
undefined,
(error) => console.warn(`âš ï¸ Failed to preload ${key}`, error)
);
}
});
}

async init() {
console.log('ğŸš€ Starting AR Viewer initialization...');
try {
await this.setupElements();
await this.setupCamera();
await this.setupRenderer();
await this.setupScene();
this.setupEventListeners();
console.log('âœ… AR Viewer initialized successfully');

// Show initial selection screen and start background loading
this.showInitialSelection();
this.startBackgroundModelLoading();

// Preload all models
this.preloadAllModels();
} catch (error) {
console.error('âŒ AR Viewer initialization failed:', error);
this.showError('Failed to initialize AR viewer: ' + error.message);
}
}

showTableInput() {
const tableInputOverlay = document.getElementById('tableInputOverlay');
const tableNumberInput = document.getElementById('tableNumberInput');
const confirmButton = document.getElementById('confirmTableButton');

// Show the table input overlay
tableInputOverlay.classList.remove('hidden');

// Focus on input after a short delay
setTimeout(() => {
tableNumberInput.focus();
}, 500);

// Handle enter key on input
tableNumberInput.addEventListener('keypress', (e) => {
if (e.key === 'Enter') {
this.confirmTableNumber();
}
});

// Handle input validation
tableNumberInput.addEventListener('input', (e) => {
const value = parseInt(e.target.value);
const isValid = value >= 1 && value <= 17;
confirmButton.disabled = !isValid;

if (isValid) {
confirmTableButton.textContent = 'Done';
} else if (e.target.value) {
confirmTableButton.textContent = 'Invalid';
} else {
confirmButton.textContent = 'Done';
}
});

// Handle confirm button
confirmButton.addEventListener('click', () => {
this.confirmTableNumber();
});
}

confirmTableNumber() {
const tableNumberInput = document.getElementById('tableNumberInput');
const tableNumber = parseInt(tableNumberInput.value);

if (tableNumber >= 1 && tableNumber <= 17) {
this.tableNumber = tableNumber;
this.isTableNumberSet = true;
console.log(`âœ… Table number set: ${tableNumber}`);

// Hide table input overlay
const tableInputOverlay = document.getElementById('tableInputOverlay');
tableInputOverlay.classList.add('hidden');

// Show language selection
this.showLanguageSelection();
} else {
this.showError(this.getText('errorMessage'));
}
}

showTableNumberDisplay() {
const tableDisplay = document.getElementById('tableNumberDisplay');
const tableText = document.getElementById('tableNumberText');

tableText.textContent = `${this.getText('tableText')} ${this.tableNumber}`;
tableDisplay.classList.remove('hidden');
tableDisplay.classList.add('visible');
}

startBackgroundModelLoading() {
console.log('ğŸ¯ Starting background loading of first model...');
// Load the first model in the background while user inputs table number
this.loadFirstModelInBackground();
}

async loadFirstModelInBackground() {
try {
console.log('ğŸ”„ Background loading first model...');
const firstModelKey = this.modelKeys[0];
const config = this.modelConfigs[firstModelKey];

// Load model without showing loading overlay (it's happening in background)
this.gltfLoader.load(
config.path,
async (gltf) => {
console.log('âœ… First model loaded in background:', config.path);

// Cache the model
this.modelCache.set(config.path, {
scene: gltf.scene,
animations: gltf.animations || [],
brightnessEnhanced: false // Track if brightness enhancement has been applied
});

// Setup the model in scene
await this.setupModelInScene(gltf.scene.clone(), config);
this.firstModelLoaded = true;
this.currentModelKey = firstModelKey;
this.currentModelIndex = 0;

// If table number is already set, show the interface
if (this.isTableNumberSet) {
this.hideLoading();
this.showModelInterface();
}
},
undefined,
(error) => {
console.error('âŒ Failed to load first model in background:', error);
}
);
} catch (error) {
console.error('âŒ Error in background model loading:', error);
}
}

showModelInterface() {
// Show model info with typing animation
this.showModelInfo(this.modelConfigs[this.currentModelKey]);
this.showNavigation();
console.log(`ğŸ‰ AR experience ready for Table ${this.tableNumber}`);
}

getCurrentOrder() {
if (!this.tableNumber || !this.currentModelKey) {
return null;
}

const config = this.modelConfigs[this.currentModelKey];
return {
tableNumber: this.tableNumber,
itemName: translations['en'][config.nameKey], // Always use English for order items
price: config.price,
timestamp: new Date().toISOString(),
modelKey: this.currentModelKey
};
}

placeOrder() {
const order = this.getCurrentOrder();
if (order) {
// Add time for display
order.time = new Date().toLocaleTimeString();
// Add to table orders list
this.tableOrders.push(order);
console.log('ğŸ“‹ Order placed:', order);

// Create order animation
this.createOrderAnimation(order.itemName, 'orderButton');

// Show confirmation
this.showError(`${this.getText('orderAdded')}: ${order.itemName} - ${order.price}`);
return order;
}
return null;
}

addOrderFromMenu(modelKey) {
if (!this.modelConfigs[modelKey]) {
return;
}

const config = this.modelConfigs[modelKey];
const order = {
tableNumber: this.tableNumber,
itemName: translations['en'][config.nameKey], // Always use English for order items
price: config.price,
timestamp: new Date().toISOString(),
modelKey: modelKey,
time: new Date().toLocaleTimeString()
};

this.tableOrders.push(order);
console.log('ğŸ“‹ Order added from menu:', order);

// Create order animation from menu button
const menuOrderBtn = document.querySelector(`[data-model-key="${modelKey}"].menu-order-btn`);
this.createOrderAnimation(order.itemName, null, menuOrderBtn);

this.showError(`${this.getText('addedToOrder')}: ${order.itemName} - ${order.price}`);

// Close menu after ordering
const menuPanel = document.getElementById('menuPanel');
menuPanel.classList.remove('active');

// Restore AR elements visibility after menu closes from ordering
this.restoreARElementsAfterMenuClose();
}

// Restore AR elements visibility when menu closes
restoreARElementsAfterMenuClose() {
const nameDisplay = document.getElementById('modelNameDisplay');
const descriptionDisplay = document.getElementById('modelDescriptionDisplay');
const tableNumberDisplay = document.getElementById('tableNumberDisplay');
const viewOrdersBtn = document.getElementById('viewOrdersBtn');
const prevArrow = document.getElementById('prevModel');
const nextArrow = document.getElementById('nextModel');
const orderButton = document.getElementById('orderButton');

// Restore AR elements if they were visible before menu opened
if (nameDisplay.classList.contains('visible')) {
nameDisplay.style.opacity = '';
nameDisplay.style.visibility = '';
}
if (descriptionDisplay.classList.contains('visible')) {
descriptionDisplay.style.opacity = '';
descriptionDisplay.style.visibility = '';
}
// Always restore table number display and view orders button when menu closes
if (tableNumberDisplay.classList.contains('visible')) {
tableNumberDisplay.style.opacity = '';
tableNumberDisplay.style.visibility = '';
}
viewOrdersBtn.style.opacity = '';
viewOrdersBtn.style.visibility = '';
// Restore navigation arrows if they were active
if (prevArrow.classList.contains('active')) {
prevArrow.style.opacity = '';
prevArrow.style.visibility = '';
}
if (nextArrow.classList.contains('active')) {
nextArrow.style.opacity = '';
nextArrow.style.visibility = '';
}
// Restore order button if it was visible
if (orderButton.classList.contains('visible')) {
orderButton.style.opacity = '';
orderButton.style.visibility = '';
}

console.log('âœ… AR elements restored after menu order');
}

createOrderAnimation(itemName, sourceElementId = null, sourceElement = null) {
// Get source position
let sourceRect;
if (sourceElement) {
sourceRect = sourceElement.getBoundingClientRect();
} else if (sourceElementId) {
const element = document.getElementById(sourceElementId);
if (element) {
sourceRect = element.getBoundingClientRect();
} else {
return; // Source element not found
}
} else {
return; // No source specified
}

// Get target position (Your Order button)
const targetElement = document.getElementById('viewOrdersBtn');
if (!targetElement) return;
const targetRect = targetElement.getBoundingClientRect();

// Create animation element
const animationElement = document.createElement('div');
animationElement.className = 'order-animation';
animationElement.textContent = itemName;

// Set initial position
animationElement.style.left = sourceRect.left + sourceRect.width / 2 - 50 + 'px';
animationElement.style.top = sourceRect.top + sourceRect.height / 2 - 15 + 'px';

// Add to document
document.body.appendChild(animationElement);

// Calculate target position
const targetX = targetRect.left + targetRect.width / 2 - 50;
const targetY = targetRect.top + targetRect.height / 2 - 15;

// Animate to target
requestAnimationFrame(() => {
animationElement.style.left = targetX + 'px';
animationElement.style.top = targetY + 'px';
animationElement.classList.add('animate');
});

// Remove element after animation
setTimeout(() => {
if (animationElement.parentNode) {
animationElement.parentNode.removeChild(animationElement);
}

// Add pulse effect to target button
targetElement.style.transform = 'scale(1.2)';
targetElement.style.transition = 'transform 0.2s ease';
setTimeout(() => {
targetElement.style.transform = '';
}, 200);
}, 1200);
}

showOrderSummary() {
const overlay = document.getElementById('orderSummaryOverlay');
const title = document.getElementById('orderSummaryTitle');
const orderList = document.getElementById('orderList');
const totalAmount = document.getElementById('totalAmount');

// Use translated text for the title
title.textContent = `Table ${this.tableNumber} ${this.getText('orderSummaryTitle')}`;

if (this.tableOrders.length === 0) {
orderList.innerHTML = `<div class="no-orders-message">${this.getText('noOrdersMessage')}</div>`;
totalAmount.textContent = `${this.getText('totalText')}: Â¥0`;
} else {
let total = 0;
orderList.innerHTML = '';

this.tableOrders.forEach((order, index) => {
const orderItem = document.createElement('div');
orderItem.className = order.deleted ? 'order-item deleted' : 'order-item';
orderItem.innerHTML = `
<div class="order-details">
<div class="order-name">${order.itemName}</div>
<div class="order-time">${order.time}</div>
</div>
<div class="order-price">${order.price}</div>
<button class="delete-order-btn" onclick="arViewer.removeOrder(${index})" title="${this.getText('removeItem')}">
Ã—
</button>
`;
orderList.appendChild(orderItem);

// Calculate total (only include non-deleted items)
if (!order.deleted) {
const priceNum = parseInt(order.price.replace(/[^0-9]/g, ''));
total += priceNum;
}
});

// Use translated text for total
totalAmount.textContent = `${this.getText('totalText')}: Â¥${total.toLocaleString()}`;
}

overlay.classList.add('visible');
}

hideOrderSummary() {
const overlay = document.getElementById('orderSummaryOverlay');
overlay.classList.remove('visible');
}

clearAllOrders() {
this.tableOrders.forEach(order => {
order.deleted = true;
});
this.showOrderSummary(); // Refresh the display
console.log(`ğŸ—‘ï¸ Marked all orders as deleted for Table ${this.tableNumber}`);
}

removeOrder(orderIndex) {
if (orderIndex >= 0 && orderIndex < this.tableOrders.length) {
const order = this.tableOrders[orderIndex];
if (!order.deleted) {
order.deleted = true;
console.log(`ğŸ—‘ï¸ Marked order as deleted:`, order);
this.showOrderSummary(); // Refresh the display
this.showError(`${this.getText('itemRemoved')}: ${order.itemName}`);
} else {
console.log('Order already deleted:', order);
}
} else {
console.warn('Invalid order index:', orderIndex);
}
}

getTableOrders() {
return this.tableOrders;
}

getTableTotal() {
let total = 0;
this.tableOrders.forEach(order => {
if (!order.deleted) {
const priceNum = parseInt(order.price.replace(/[^0-9]/g, ''));
total += priceNum;
}
});
return total;
}

async loadFirstModel() {
// This method is now handled by background loading
// keeping it for compatibility
if (!this.firstModelLoaded) {
await this.loadFirstModelInBackground();
}
}

async setupElements() {
console.log('ğŸ”§ Setting up DOM elements...');
this.video = document.getElementById('video');
this.canvas = document.getElementById('ar-canvas');

if (!this.video || !this.canvas) {
throw new Error('Required DOM elements not found');
}

console.log('âœ… DOM elements ready');
return Promise.resolve();
}

async setupCamera() {
console.log('ğŸ“· Setting up camera...');
try {
// Check if getUserMedia is available
if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
console.warn('Camera API not supported, continuing without camera');
return Promise.resolve();
}

const constraints = {
video: {
facingMode: 'environment', // Use back camera
width: { ideal: 1280 },
height: { ideal: 720 }
}
};

console.log('ğŸ” Requesting camera permission...');
const stream = await navigator.mediaDevices.getUserMedia(constraints);
this.video.srcObject = stream;

return new Promise((resolve, reject) => {
this.video.onloadedmetadata = () => {
console.log('âœ… Camera active:', this.video.videoWidth + 'x' + this.video.videoHeight);
resolve();
};

this.video.onerror = (error) => {
console.warn('Video element error, continuing without camera:', error);
resolve(); // Don't reject, just continue
};

// Timeout fallback
setTimeout(() => {
if (this.video.readyState === 0) {
console.warn('Camera timeout, continuing without camera');
resolve(); // Don't reject, just continue
}
}, 10000);
});
} catch (error) {
console.warn('âš ï¸ Camera access failed, continuing without camera:', error);
return Promise.resolve();
}
}

async setupRenderer() {
console.log('ğŸ¨ Setting up WebGL renderer...');
try {
this.renderer = new THREE.WebGLRenderer({
canvas: this.canvas,
alpha: true,
antialias: true
});

this.renderer.setSize(window.innerWidth, window.innerHeight);
this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

// Enable shadows
this.renderer.shadowMap.enabled = true;
this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;

// Color settings
this.renderer.outputEncoding = THREE.sRGBEncoding;
this.renderer.toneMapping = THREE.ACESFilmicToneMapping;
this.renderer.toneMappingExposure = 1.0;

console.log('âœ… WebGL renderer initialized');
} catch (error) {
throw new Error('WebGL not supported: ' + error.message);
}
}

setupScene() {
console.log('ğŸŒŸ Setting up 3D scene...');
this.scene = new THREE.Scene();

// Camera setup with wider field of view for better zoom
this.camera = new THREE.PerspectiveCamera(
80,
window.innerWidth / window.innerHeight,
0.05,
2000
);
this.camera.position.set(0, 0, 0);

// Lighting setup
const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
this.scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
directionalLight.position.set(5, 10, 5);
directionalLight.castShadow = true;
directionalLight.shadow.mapSize.width = 1024;
directionalLight.shadow.mapSize.height = 1024;
this.scene.add(directionalLight);

// Additional fill light
const fillLight = new THREE.DirectionalLight(0xffffff, 0.3);
fillLight.position.set(-5, 0, -5);
this.scene.add(fillLight);

console.log('âœ… 3D scene initialized');
}

setupEventListeners() {
console.log('âš™ï¸ Setting up event listeners...');

// Menu toggle
document.getElementById('menuTrigger').addEventListener('click', () => {
const panel = document.getElementById('menuPanel');
const nameDisplay = document.getElementById('modelNameDisplay');
const descriptionDisplay = document.getElementById('modelDescriptionDisplay');
const tableNumberDisplay = document.getElementById('tableNumberDisplay');
const viewOrdersBtn = document.getElementById('viewOrdersBtn');
const prevArrow = document.getElementById('prevModel');
const nextArrow = document.getElementById('nextModel');

panel.classList.toggle('active');

// Hide/show AR elements based on menu state
if (panel.classList.contains('active')) {
// Menu is opening - hide AR elements
nameDisplay.style.opacity = '0';
nameDisplay.style.visibility = 'hidden';
descriptionDisplay.style.opacity = '0';
descriptionDisplay.style.visibility = 'hidden';
tableNumberDisplay.style.opacity = '0';
tableNumberDisplay.style.visibility = 'hidden';
viewOrdersBtn.style.opacity = '0';
viewOrdersBtn.style.visibility = 'hidden';
prevArrow.style.opacity = '0';
prevArrow.style.visibility = 'hidden';
nextArrow.style.opacity = '0';
nextArrow.style.visibility = 'hidden';
console.log('ğŸ½ï¸ Menu opened - All AR elements hidden');
} else {
// Menu is closing - restore AR elements if they were visible
if (nameDisplay.classList.contains('visible')) {
nameDisplay.style.opacity = '';
nameDisplay.style.visibility = '';
}
if (descriptionDisplay.classList.contains('visible')) {
descriptionDisplay.style.opacity = '';
descriptionDisplay.style.visibility = '';
}
// Always restore table number display and view orders button when menu closes
if (tableNumberDisplay.classList.contains('visible')) {
tableNumberDisplay.style.opacity = '';
tableNumberDisplay.style.visibility = '';
}
viewOrdersBtn.style.opacity = '';
viewOrdersBtn.style.visibility = '';
// Restore navigation arrows if they were active
if (prevArrow.classList.contains('active')) {
prevArrow.style.opacity = '';
prevArrow.style.visibility = '';
}
if (nextArrow.classList.contains('active')) {
nextArrow.style.opacity = '';
nextArrow.style.visibility = '';
}
console.log('ğŸ½ï¸ Menu closed - All AR elements restored');
}
});

// Model selection using data-model-key
document.querySelectorAll('.menu-item[data-model-key]').forEach(item => {
item.addEventListener('click', (e) => {
// Prevent event if clicking on order button
if (e.target.classList.contains('menu-order-btn')) {
return;
}
const modelKey = e.currentTarget.getAttribute('data-model-key');
this.loadModelByKey(modelKey);
const menuPanel = document.getElementById('menuPanel');
menuPanel.classList.remove('active');

// Restore AR elements visibility when menu closes after selection
const nameDisplay = document.getElementById('modelNameDisplay');
const descriptionDisplay = document.getElementById('modelDescriptionDisplay');
const tableNumberDisplay = document.getElementById('tableNumberDisplay');
const viewOrdersBtn = document.getElementById('viewOrdersBtn');
const prevArrow = document.getElementById('prevModel');
const nextArrow = document.getElementById('nextModel');
if (nameDisplay.classList.contains('visible')) {
nameDisplay.style.opacity = '';
nameDisplay.style.visibility = '';
}
if (descriptionDisplay.classList.contains('visible')) {
descriptionDisplay.style.opacity = '';
descriptionDisplay.style.visibility = '';
}
// Always restore table number display and view orders button
if (tableNumberDisplay.classList.contains('visible')) {
tableNumberDisplay.style.opacity = '';
tableNumberDisplay.style.visibility = '';
}
viewOrdersBtn.style.opacity = '';
viewOrdersBtn.style.visibility = '';
// Restore navigation arrows if they were active
if (prevArrow.classList.contains('active')) {
prevArrow.style.opacity = '';
prevArrow.style.visibility = '';
}
if (nextArrow.classList.contains('active')) {
nextArrow.style.opacity = '';
nextArrow.style.visibility = '';
}

// Log selection for restaurant orders
if (this.tableNumber) {
console.log(`ğŸ½ï¸ Table ${this.tableNumber} selected: ${modelKey}`);
}
});
});

// Menu order buttons
document.querySelectorAll('.menu-order-btn').forEach(btn => {
btn.addEventListener('click', (e) => {
e.stopPropagation();
const modelKey = e.target.getAttribute('data-model-key');
if (this.tableNumber && modelKey) {
this.addOrderFromMenu(modelKey);
}
});
});

// Navigation arrows
document.getElementById('nextModel').addEventListener('click', () => this.nextModel());
document.getElementById('prevModel').addEventListener('click', () => this.prevModel());

// Order button
document.getElementById('orderButton').addEventListener('click', () => {
if (this.tableNumber && this.currentModelKey) {
this.placeOrder();
}
});

// View orders button
document.getElementById('viewOrdersBtn').addEventListener('click', () => {
this.showOrderSummary();
});

// Close orders overlay
document.getElementById('closeOrdersBtn').addEventListener('click', () => {
this.hideOrderSummary();
});

// Clear all orders
document.getElementById('clearOrdersBtn').addEventListener('click', () => {
this.clearAllOrders();
});

// Window resize
window.addEventListener('resize', () => this.handleResize());

// Touch controls
this.setupTouchControls();

console.log('âœ… Event listeners ready');
}

setupTouchControls() {
let isRotating = false;
let isPinching = false;
let isDragging = false;
let lastTouchX = 0;
let lastTouchY = 0;
let lastDistance = 0;

// Touch start
this.canvas.addEventListener('touchstart', (e) => {
if (!this.currentModel) return;

if (e.touches.length === 1) {
// Single touch - start rotation/dragging
isRotating = true;
isDragging = false;
lastTouchX = e.touches[0].clientX;
lastTouchY = e.touches[0].clientY;
} else if (e.touches.length === 2) {
// Two touches - start pinching
isPinching = true;
isRotating = false;
isDragging = false;

const touch1 = e.touches[0];
const touch2 = e.touches[1];
const dx = touch1.clientX - touch2.clientX;
const dy = touch1.clientY - touch2.clientY;
lastDistance = Math.sqrt(dx * dx + dy * dy);
}

e.preventDefault();
e.stopPropagation();
}, { passive: false });

// Touch move
this.canvas.addEventListener('touchmove', (e) => {
if (!this.currentModel) return;

if (isRotating && e.touches.length === 1) {
const touch = e.touches[0];
const deltaX = touch.clientX - lastTouchX;
const deltaY = touch.clientY - lastTouchY;

// Check if it's a significant movement to start dragging
if (Math.abs(deltaX) > 2 || Math.abs(deltaY) > 2) {
isDragging = true;

// FIXED: Corrected the touch rotation directions
// X-axis (horizontal) movement rotates around Y-axis
this.currentModel.rotation.y += deltaX * 0.008;
// Y-axis (vertical) movement rotates around X-axis - FIXED: added instead of subtracted
this.currentModel.rotation.x += deltaY * 0.008;

// Apply rotation limits to prevent flipping upside down
this.currentModel.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, this.currentModel.rotation.x));
}

lastTouchX = touch.clientX;
lastTouchY = touch.clientY;
} else if (isPinching && e.touches.length === 2) {
const touch1 = e.touches[0];
const touch2 = e.touches[1];
const dx = touch1.clientX - touch2.clientX;
const dy = touch1.clientY - touch2.clientY;
const distance = Math.sqrt(dx * dx + dy * dy);

if (lastDistance > 0) {
const scaleFactor = distance / lastDistance;
// Apply zoom with some dampening
if (scaleFactor > 0.5 && scaleFactor < 2.0) {
this.scaleModel(scaleFactor);
}
}

lastDistance = distance;
}

e.preventDefault();
e.stopPropagation();
}, { passive: false });

// Touch end
this.canvas.addEventListener('touchend', (e) => {
isRotating = false;
isPinching = false;
isDragging = false;
lastDistance = 0;
e.preventDefault();
}, { passive: false });

// Mouse controls for desktop testing
this.canvas.addEventListener('mousedown', (e) => {
if (!this.currentModel) return;
isRotating = true;
lastTouchX = e.clientX;
lastTouchY = e.clientY;
e.preventDefault();
});

this.canvas.addEventListener('mousemove', (e) => {
if (!this.currentModel || !isRotating) return;

const deltaX = e.clientX - lastTouchX;
const deltaY = e.clientY - lastTouchY;
        
// FIXED: Corrected mouse rotation directions to match touch
this.currentModel.rotation.y += deltaX * 0.008;
this.currentModel.rotation.x += deltaY * 0.008;

// Apply rotation limits to prevent flipping upside down
this.currentModel.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, this.currentModel.rotation.x));
        
lastTouchX = e.clientX;
lastTouchY = e.clientY;
e.preventDefault();
});

this.canvas.addEventListener('mouseup', () => {
isRotating = false;
});

// Wheel zoom for desktop
this.canvas.addEventListener('wheel', (e) => {
if (!this.currentModel) return;

const scaleFactor = e.deltaY > 0 ? 0.9 : 1.1;
this.scaleModel(scaleFactor);
e.preventDefault();
}, { passive: false });

console.log('âœ… Touch controls initialized');
}

nextModel() {
// Prevent rapid switching and race conditions
const now = Date.now();
if (this.isLoadingModel || (now - this.lastSwitchTime) < this.switchCooldown) {
console.log('âš ï¸ Model switch ignored - too fast or loading in progress');
return;
}

this.lastSwitchTime = now;
this.setNavigationLoading(true);
this.currentModelIndex = (this.currentModelIndex + 1) % this.modelKeys.length;
console.log(`â¡ï¸ Switching to next model: ${this.modelKeys[this.currentModelIndex]} (${this.currentModelIndex + 1}/${this.modelKeys.length})`);
this.loadModelByKey(this.modelKeys[this.currentModelIndex]);
}

prevModel() {
// Prevent rapid switching and race conditions
const now = Date.now();
if (this.isLoadingModel || (now - this.lastSwitchTime) < this.switchCooldown) {
console.log('âš ï¸ Model switch ignored - too fast or loading in progress');
return;
}

this.lastSwitchTime = now;
this.setNavigationLoading(true);
this.currentModelIndex = (this.currentModelIndex - 1 + this.modelKeys.length) % this.modelKeys.length;
console.log(`â¬…ï¸ Switching to previous model: ${this.modelKeys[this.currentModelIndex]} (${this.currentModelIndex + 1}/${this.modelKeys.length})`);
this.loadModelByKey(this.modelKeys[this.currentModelIndex]);
}

// Typing animation method
typeText(element, text, speed = 50) {
return new Promise((resolve) => {
element.innerHTML = '';
let index = 0;

// Clear any existing timeout
if (this.typingTimeout) {
clearTimeout(this.typingTimeout);
this.typingTimeout = null;
}

const typeChar = () => {
// Check if typing was interrupted (element cleared or hidden)
if (!element.parentElement || element.innerHTML === '' && index > 0) {
console.log('ğŸš­ Typing animation interrupted');
resolve();
return;
}

if (index < text.length) {
element.innerHTML = text.substring(0, index + 1) + '<span class="typing-cursor"></span>';
index++;
this.typingTimeout = setTimeout(typeChar, speed);
} else {
// Remove cursor when done
element.innerHTML = text;
this.typingTimeout = null;
resolve();
}
};
typeChar();
});
}

// Show model information with typing animation
showModelInfo(config) {
const nameDisplay = document.getElementById('modelNameDisplay');
const descriptionDisplay = document.getElementById('modelDescriptionDisplay');
const nameText = document.getElementById('modelNameText');
const descriptionText = document.getElementById('modelDescriptionText');
const priceText = document.getElementById('modelPriceText');

// Show the displays
nameDisplay.classList.remove('hidden');
nameDisplay.classList.add('visible');
descriptionDisplay.classList.remove('hidden');
descriptionDisplay.classList.add('visible');

// Set the name using translation
nameText.textContent = this.getText(config.nameKey);

// Clear price initially
priceText.classList.remove('visible');
priceText.textContent = '';

// Show order button immediately when description starts (if table is set)
if (this.isTableNumberSet) {
const orderButton = document.getElementById('orderButton');
orderButton.textContent = this.getText('orderButton');
orderButton.classList.add('visible');
}

// Type the description with animation using translated text (non-blocking)
this.typeText(descriptionText, this.getText(config.descriptionKey), 60).then(() => {
// Show price after description is complete
setTimeout(() => {
priceText.textContent = config.price;
priceText.classList.add('visible');
}, 300);
});

// Return immediately without waiting for typing animation
return Promise.resolve();
}

// Hide model information
hideModelInfo() {
const nameDisplay = document.getElementById('modelNameDisplay');
const descriptionDisplay = document.getElementById('modelDescriptionDisplay');
const priceText = document.getElementById('modelPriceText');
const orderButton = document.getElementById('orderButton');

nameDisplay.classList.remove('visible');
nameDisplay.classList.add('hidden');
descriptionDisplay.classList.remove('visible');
descriptionDisplay.classList.add('hidden');
priceText.classList.remove('visible');
orderButton.classList.remove('visible');

// Clear typing timeout if active
if (this.typingTimeout) {
clearTimeout(this.typingTimeout);
this.typingTimeout = null;
}
}

async loadModelByKey(modelKey) {
if (!this.modelConfigs[modelKey]) {
console.error('âŒ Unknown model key:', modelKey);
this.showError(`Unknown model: ${modelKey}`);
return;
}

// Prevent overlapping model loads
if (this.isLoadingModel) {
console.log('âš ï¸ Model load ignored - already loading');
return;
}

const config = this.modelConfigs[modelKey];

try {
this.isLoadingModel = true;
console.log('ğŸ¯ Loading model:', modelKey, config);

this.currentModelKey = modelKey;
this.currentModelIndex = this.modelKeys.indexOf(modelKey);

// Hide info displays during loading
this.hideModelInfo();

// Check cache first
if (this.modelCache.has(config.path)) {
console.log('ğŸ’¾ Using cached model - skipping loading overlay');
const cachedData = this.modelCache.get(config.path);
// Clone the scene to avoid modifying the original
const clonedScene = cachedData.scene.clone();
await this.setupModelInScene(clonedScene, config);
// Skip loading overlay for cached models to prevent white flash
// Show model info with typing animation immediately
this.showModelInfo(config);
this.showNavigation();
this.setNavigationLoading(false);
this.isLoadingModel = false;
return;
}

// Only show loading overlay for uncached models
this.showLoading(`Loading ${config.displayName}...`, 'Processing GLB file...');

// Load model from file
this.gltfLoader.load(
config.path,
async (gltf) => {
console.log('âœ… Model loaded from file:', config.path);

// Cache the model
this.modelCache.set(config.path, {
scene: gltf.scene,
animations: gltf.animations || [],
brightnessEnhanced: false // Track if brightness enhancement has been applied
});

// Setup the model in scene
await this.setupModelInScene(gltf.scene.clone(), config);
this.hideLoading();

// Show model info with typing animation
this.showModelInfo(config);
this.showNavigation();
this.setNavigationLoading(false);
this.isLoadingModel = false;
},
(progress) => {
const percent = Math.round((progress.loaded / progress.total) * 100);
this.updateLoadingProgress(`Loading... ${percent}%`);
},
(error) => {
console.error('âŒ Failed to load model:', error);
this.hideLoading();
this.setNavigationLoading(false);
this.isLoadingModel = false;
this.showError(`Failed to load model: ${config.displayName}`);
}
);
} catch (error) {
console.error('âŒ Error in loadModelByKey:', error);
this.hideLoading();
this.setNavigationLoading(false);
this.isLoadingModel = false;
this.showError('Failed to load model: ' + error.message);
}
}

async setupModelInScene(modelScene, config) {
// Remove previous model if exists
if (this.currentModel) {
this.scene.remove(this.currentModel);
this.currentModel = null;
}

// Apply configuration
modelScene.position.set(config.position.x, config.position.y, config.position.z);
modelScene.rotation.set(config.rotation.x, config.rotation.y, config.rotation.z);
modelScene.scale.set(config.scale.x, config.scale.y, config.scale.z);

// Enable shadows
modelScene.traverse((child) => {
if (child.isMesh) {
child.castShadow = true;
child.receiveShadow = true;
}
});

// Improve clarity for meal3-6 only without affecting other models
// Check if brightness enhancement has already been applied to prevent accumulation
const cachedModel = this.modelCache.get(config.path);
if (['meal3', 'meal4', 'meal5', 'meal6'].includes(this.currentModelKey) && cachedModel && !cachedModel.brightnessEnhanced) {
modelScene.traverse((child) => {
if (child.isMesh && child.material) {
const materials = Array.isArray(child.material) ? child.material : [child.material];
materials.forEach((mat) => {
if (mat.map && mat.map.encoding !== THREE.sRGBEncoding) {
mat.map.encoding = THREE.sRGBEncoding;
mat.map.needsUpdate = true;
}
if (mat.emissiveMap && mat.emissiveMap.encoding !== THREE.sRGBEncoding) {
mat.emissiveMap.encoding = THREE.sRGBEncoding;
mat.emissiveMap.needsUpdate = true;
}

// Slight brightness and vividness boost
if (mat.color) {
mat.color.convertSRGBToLinear();
mat.color.multiplyScalar(1.12);
}
if (mat.emissive) {
mat.emissive = new THREE.Color(0.06, 0.06, 0.06);
mat.emissiveIntensity = (typeof mat.emissiveIntensity === 'number') ? Math.max(mat.emissiveIntensity, 0.9) : 0.9;
}
if (typeof mat.roughness === 'number') {
mat.roughness = Math.max(0.0, Math.min(1.0, mat.roughness - 0.15));
}
if (typeof mat.metalness === 'number') {
mat.metalness = Math.max(0.0, Math.min(1.0, mat.metalness * 0.9));
}
mat.needsUpdate = true;
});
}
});
// Mark that brightness enhancement has been applied
if (cachedModel) {
  cachedModel.brightnessEnhanced = true;
}
}

// Add to scene
this.scene.add(modelScene);
this.currentModel = modelScene;

// Store configuration for auto-rotation
this.currentModel.userData.config = config;

// Start rendering if not already
if (!this.isArActive) {
this.startRendering();
}

console.log('âœ… Model setup complete:', config.displayName);
}

startRendering() {
if (this.isArActive) return;
this.isArActive = true;
this.render();
console.log('ğŸ¬ Started rendering loop');
}

render() {
if (!this.isArActive) return;

this.frameId = requestAnimationFrame(() => this.render());

// Auto-rotation if enabled
if (this.currentModel && this.currentModel.userData.config.autoRotate) {
this.currentModel.rotation.y += this.currentModel.userData.config.rotationSpeed;
}

// Render the scene
if (this.renderer && this.scene && this.camera) {
this.renderer.render(this.scene, this.camera);
}
}

stopRendering() {
this.isArActive = false;
if (this.frameId) {
cancelAnimationFrame(this.frameId);
this.frameId = null;
}
console.log('â¹ï¸ Stopped rendering');
}

showNavigation() {
const prevArrow = document.getElementById('prevModel');
const nextArrow = document.getElementById('nextModel');
prevArrow.classList.add('active');
nextArrow.classList.add('active');

// Remove any loading state visual feedback
prevArrow.classList.remove('loading');
nextArrow.classList.remove('loading');
}

hideNavigation() {
const prevArrow = document.getElementById('prevModel');
const nextArrow = document.getElementById('nextModel');
prevArrow.classList.remove('active');
nextArrow.classList.remove('active');
}

// Add visual feedback during model switching
setNavigationLoading(isLoading) {
const prevArrow = document.getElementById('prevModel');
const nextArrow = document.getElementById('nextModel');

if (isLoading) {
prevArrow.classList.add('loading');
nextArrow.classList.add('loading');
} else {
prevArrow.classList.remove('loading');
nextArrow.classList.remove('loading');
}
}

scaleModel(scaleFactor) {
if (this.currentModel) {
// Get current scale
const currentScale = this.currentModel.scale.x;
const newScale = currentScale * scaleFactor;
        
// Set reasonable scale limits (0.1 to 4.0) for better zoom range
if (newScale >= 0.1 && newScale <= 4.0) {
this.currentModel.scale.set(newScale, newScale, newScale);
console.log(`Model scaled to: ${newScale.toFixed(2)}`);
}
}
}

handleResize() {
if (this.camera && this.renderer) {
this.camera.aspect = window.innerWidth / window.innerHeight;
this.camera.updateProjectionMatrix();
this.renderer.setSize(window.innerWidth, window.innerHeight);
}
}

showLoading(text, progress = '') {
const overlay = document.getElementById('loadingOverlay');
const loadingText = document.getElementById('loadingText');
const loadingProgress = document.getElementById('loadingProgress');

loadingText.textContent = text;
loadingProgress.textContent = progress;
overlay.style.display = 'flex';
}

updateLoadingProgress(progress) {
const loadingProgress = document.getElementById('loadingProgress');
loadingProgress.textContent = progress;
}

hideLoading() {
const overlay = document.getElementById('loadingOverlay');
overlay.style.display = 'none';
}

showError(message) {
const errorElement = document.getElementById('errorMessage');
errorElement.textContent = message;
errorElement.style.display = 'block';

setTimeout(() => {
errorElement.style.display = 'none';
}, 5000);
}

// Restaurant-specific methods
getTableNumber() {
return this.tableNumber;
}

isTableSet() {
return this.isTableNumberSet;
}

// Export order data for restaurant systems
exportOrderData() {
const order = this.getCurrentOrder();
if (order) {
return JSON.stringify(order, null, 2);
}
return null;
}
}

// Initialize the AR Viewer when the page loads
let arViewer;
document.addEventListener('DOMContentLoaded', () => {
console.log('ğŸŒŸ Page loaded, initializing AR Viewer...');
arViewer = new ARViewer();
});
</script>

</body>
</html>